import{j as r}from"./_commonjs-dynamic-modules-6308e768.js";import{E,e as b,p as m,g as v,h as T,j as w,k as x,q as h,l as L,m as N}from"./ErrorBoundaryFallback-54192edb.js";import{u as O,f as g,G as A,i as j,a as c,C as k,d as G,e as S}from"./buildASTSchema-6c51c448.js";import{r as f}from"./index-f46741a2.js";const I=l=>r.jsx(E,{fallback:r.jsx(b,{componentName:"GraphQL Operation Viewer"}),children:r.jsx(P,{...l})}),P=l=>{O();const{source:i,operationType:t,operationName:a,expandedDepth:_=L,displayMode:C=N}=l;console.debug("GraphAPI Schema:",i);const n=f.useMemo(()=>{const e=window||void 0;return e?(e.__advTree__||(console.debug('Create tree model and bind it to global variable "window"'),e.__advTree__=g(i,void 0)),console.debug('Return cached tree model already saved in global variable "window"'),e.__advTree__):(console.debug("Create tree model and return it as-is"),g(i,void 0))},[i]),[d,p]=f.useMemo(()=>{if(!n.root)return[void 0,void 0];const s=n.root.children().filter(m)[0];return s?[s.kind,s.key]:[void 0,void 0]},[n]);console.debug("Tree Model:",n);const D=f.useMemo(()=>new A(n,_,e=>(console.debug("[CB] node",e),e?(console.debug("[CB] !isGraphApiOperationNode(node)",!m(e)),m(e)?(console.debug("[CB] operationType, operationName:",t,a),!t||!a?(console.debug("[CB] FIRST",d,p,"result=",e.kind!==d||e.key!==p),e.kind!==d||e.key!==p):(console.debug("[CB] result=",e.kind!==t||e.key!==a),e.kind!==t||e.key!==a)):!1):!0)),[_,p,d,a,t,n]);console.debug("State Model:",D);const y=D.root;return y?r.jsx(v.Provider,{value:C,children:r.jsx(T.Provider,{value:0,children:r.jsx("div",{style:{marginLeft:0},children:y.children.map((e,s)=>{const u=`root-children-${s}`;if(j(e)){const o=e.meta;return w(e.node)?r.jsx(c,{state:e,$nodeChange:o==null?void 0:o.$nodeChange},u):x(e.node)&&e.first?r.jsxs("div",{children:[r.jsx(k,{layoutMode:h}),r.jsx(c,{state:e,$nodeChange:o==null?void 0:o.$nodeChange})]},u):r.jsx(c,{state:e,$nodeChange:o==null?void 0:o.$nodeChange},u)}return G(e)?r.jsx(S,{state:e,onGlobalSelectNestedNode:()=>null},u):null})})})}):null};I.__docgenInfo={description:"",methods:[],displayName:"GraphQLOperationViewer",props:{source:{required:!0,tsType:{name:"unknown"},description:""},operationType:{required:!1,tsType:{name:"string"},description:""},operationName:{required:!1,tsType:{name:"string"},description:""},expandedDepth:{required:!1,tsType:{name:"number"},description:""},displayMode:{required:!1,tsType:{name:"union",raw:`| typeof SIMPLE_DISPLAY_MODE
| typeof DETAILED_DISPLAY_MODE`,elements:[{name:"SIMPLE_DISPLAY_MODE"},{name:"DETAILED_DISPLAY_MODE"}]},description:""}}};export{I as G};
