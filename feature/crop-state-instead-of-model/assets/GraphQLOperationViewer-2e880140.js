import{j as r}from"./_commonjs-dynamic-modules-6308e768.js";import{E as v,e as w,g as E,h as x,j as T,k as C,l as L,q as b,m as h,o as O}from"./ErrorBoundaryFallback-c4d4c471.js";import{u as A,f as y,G as N,i as j,a as u,C as G,d as P,e as S}from"./buildASTSchema-4ed1da85.js";import{r as l}from"./index-f46741a2.js";const I=i=>r.jsx(v,{fallback:r.jsx(w,{componentName:"GraphQL Operation Viewer"}),children:r.jsx(M,{...i})}),M=i=>{A();const{source:a,operationType:d,operationName:p,expandedDepth:m=h,displayMode:g=O}=i;console.debug("GraphAPI Schema:",a);const n=l.useMemo(()=>{const e=window||void 0;return e?(e.__advTree__||(console.debug('Create tree model and bind it to global variable "window"'),e.__advTree__=y(a)),console.debug('Return cached tree model already saved in global variable "window"'),e.__advTree__):(console.debug("Create tree model and return it as-is"),y(a))},[a]),[c,f]=l.useMemo(()=>{if(!n.root)return[void 0,void 0];const t=n.root.children().filter(E)[0];return t?[t.kind,t.key]:[void 0,void 0]},[n]);console.debug("Tree Model:",n);const _=l.useMemo(()=>new N(n,m,e=>e?E(e)?!d||!p?e.kind!==c||e.key!==f:e.kind!==d||e.key!==p:!1:!0),[m,f,c,p,d,n]);console.debug("State Model:",_);const D=_.root;return D?r.jsx(x.Provider,{value:g,children:r.jsx(T.Provider,{value:0,children:r.jsx("div",{style:{marginLeft:0},children:D.children.map((e,t)=>{const s=`root-children-${t}`;if(j(e)){const o=e.meta;return C(e.node)?r.jsx(u,{state:e,$nodeChange:o==null?void 0:o.$nodeChange},s):L(e.node)&&e.first?r.jsxs("div",{children:[r.jsx(G,{layoutMode:b}),r.jsx(u,{state:e,$nodeChange:o==null?void 0:o.$nodeChange})]},s):r.jsx(u,{state:e,$nodeChange:o==null?void 0:o.$nodeChange},s)}return P(e)?r.jsx(S,{state:e,onGlobalSelectNestedNode:()=>null},s):null})})})}):null};I.__docgenInfo={description:"",methods:[],displayName:"GraphQLOperationViewer",props:{source:{required:!0,tsType:{name:"unknown"},description:""},operationType:{required:!1,tsType:{name:"string"},description:""},operationName:{required:!1,tsType:{name:"string"},description:""},expandedDepth:{required:!1,tsType:{name:"number"},description:""},displayMode:{required:!1,tsType:{name:"union",raw:`| typeof SIMPLE_DISPLAY_MODE
| typeof DETAILED_DISPLAY_MODE`,elements:[{name:"SIMPLE_DISPLAY_MODE"},{name:"DETAILED_DISPLAY_MODE"}]},description:""}}};export{I as G};
