import{j as r}from"./_commonjs-dynamic-modules-6308e768.js";import{E as M,e as v,f as A,g,C as I,h as x,L as C,j as b,k as w,l as S,m as h,o as N,p as j}from"./ErrorBoundaryFallback-c4d4c471.js";import{u as P,c as T,G,i as Y,a as u,C as k,d as F,e as U}from"./buildASTSchema-38ddf42a.js";import{r as l}from"./index-f46741a2.js";const q=d=>r.jsx(M,{fallback:r.jsx(v,{componentName:"GraphQL Operation Diff Viewer"}),children:r.jsx(K,{...d})}),K=d=>{P();const{source:a,operationType:p,operationName:f,expandedDepth:m=h,displayMode:L=N,layoutMode:D=j,filters:O=[],metaKeys:n}=d;console.debug("GraphAPI Schema:",a),A(a,n.diffsMetaKey,n.aggregatedDiffsMetaKey);const o=l.useMemo(()=>{const e=window||void 0;return e?(e.__advTree__||(console.debug('Create tree model and bind it to global variable "window"'),e.__advTree__=T(a,n)),console.debug('Return cached tree model already saved in global variable "window"'),e.__advTree__):(console.debug("Create tree model and return it as-is"),T(a,n))},[n,a]),[y,_]=l.useMemo(()=>{if(!o.root)return[void 0,void 0];const i=o.root.children().filter(g)[0];return i?[i.kind,i.key]:[void 0,void 0]},[o]);console.debug("Diff Tree Model:",o);const c=l.useMemo(()=>new G(o,m,e=>e?g(e)?!p||!f?e.kind!==y||e.key!==_:e.kind!==p||e.key!==f:!1:!0),[m,_,y,f,p,o]);console.debug("Diff State Model:",c);const E=c.root;return E?r.jsx(I.Provider,{value:O,children:r.jsx(x.Provider,{value:L,children:r.jsx(C.Provider,{value:D,children:r.jsx(b.Provider,{value:0,children:r.jsx("div",{style:{marginLeft:0},children:E.children.map((e,i)=>{const s=`root-children-${i}`;if(Y(e)){const t=e.meta;return w(e.node)?r.jsx(u,{state:e,$nodeChange:t==null?void 0:t.$nodeChange},s):S(e.node)&&e.first?r.jsxs("div",{children:[r.jsx(k,{layoutMode:D}),r.jsx(u,{state:e,$nodeChange:t==null?void 0:t.$nodeChange})]},s):r.jsx(u,{state:e,$nodeChange:t==null?void 0:t.$nodeChange},s)}return F(e)?r.jsx(U,{state:e,onGlobalSelectNestedNode:()=>null},s):null})})})})})}):null};q.__docgenInfo={description:"",methods:[],displayName:"GraphQLOperationDiffViewer",props:{source:{required:!0,tsType:{name:"unknown"},description:""},operationType:{required:!1,tsType:{name:"string"},description:""},operationName:{required:!1,tsType:{name:"string"},description:""},expandedDepth:{required:!1,tsType:{name:"number"},description:""},displayMode:{required:!1,tsType:{name:"union",raw:`| typeof SIMPLE_DISPLAY_MODE
| typeof DETAILED_DISPLAY_MODE`,elements:[{name:"SIMPLE_DISPLAY_MODE"},{name:"DETAILED_DISPLAY_MODE"}]},description:""},layoutMode:{required:!1,tsType:{name:"union",raw:`| typeof DOCUMENT_LAYOUT_MODE
| typeof INLINE_DIFFS_LAYOUT_MODE
| typeof SIDE_BY_SIDE_DIFFS_LAYOUT_MODE`,elements:[{name:"DOCUMENT_LAYOUT_MODE"},{name:"INLINE_DIFFS_LAYOUT_MODE"},{name:"SIDE_BY_SIDE_DIFFS_LAYOUT_MODE"}]},description:""},filters:{required:!1,tsType:{name:"ReadonlyArray",elements:[{name:"DiffType"}],raw:"ReadonlyArray<DiffType>"},description:""},metaKeys:{required:!0,tsType:{name:"signature",type:"object",raw:`{
  diffsMetaKey: symbol;
  aggregatedDiffsMetaKey: symbol;
}`,signature:{properties:[{key:"diffsMetaKey",value:{name:"symbol",required:!0}},{key:"aggregatedDiffsMetaKey",value:{name:"symbol",required:!0}}]}},description:""}}};export{q as G};
