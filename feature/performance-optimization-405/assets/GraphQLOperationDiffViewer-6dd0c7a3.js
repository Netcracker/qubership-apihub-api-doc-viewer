import{j as e}from"./_commonjs-dynamic-modules-6308e768.js";import{E as L,e as M,f as T,C as g,g as O,L as I,h as A,j as S,k as x,l as h,m as N}from"./ErrorBoundaryFallback-b09b2616.js";import{u as P,c as j,G as v,i as C,a as u,d as b,e as Y}from"./buildASTSchema-f6cc5832.js";import{r as m}from"./index-f46741a2.js";const w=n=>e.jsx(L,{fallback:e.jsx(M,{componentName:"GraphQL Operation Diff Viewer"}),children:e.jsx(F,{...n})}),F=n=>{P();const{source:t,operationType:p,operationName:d,expandedDepth:f=x,displayMode:y=h,layoutMode:E=N,filters:_=[],metaKeys:o}=n;console.debug("GraphAPI Schema:",t),T(t,o.diffsMetaKey,o.aggregatedDiffsMetaKey);const s=m.useMemo(()=>j(t,o,void 0,void 0,p,d),[o,d,p,t]);console.debug("Diff Tree Model:",s);const D=m.useMemo(()=>new v(s,f),[f,s]);console.debug("Diff State Model:",D);const l=D.root;return l?e.jsx(g.Provider,{value:_,children:e.jsx(O.Provider,{value:y,children:e.jsx(I.Provider,{value:E,children:e.jsx(A.Provider,{value:0,children:e.jsx("div",{style:{marginLeft:0},children:l.children.map((r,c)=>{const i=`root-children-${c}`;if(C(r)){const a=r.meta;return S(r.node)?e.jsx(u,{state:r,$nodeChange:a==null?void 0:a.$nodeChange},i):e.jsx(u,{state:r,$nodeChange:a==null?void 0:a.$nodeChange},i)}return b(r)?e.jsx(Y,{state:r,onGlobalSelectNestedNode:()=>null},i):null})})})})})}):null};w.__docgenInfo={description:"",methods:[],displayName:"GraphQLOperationDiffViewer",props:{source:{required:!0,tsType:{name:"unknown"},description:""},operationType:{required:!1,tsType:{name:"string"},description:""},operationName:{required:!1,tsType:{name:"string"},description:""},expandedDepth:{required:!1,tsType:{name:"number"},description:""},displayMode:{required:!1,tsType:{name:"union",raw:`| typeof SIMPLE_DISPLAY_MODE
| typeof DETAILED_DISPLAY_MODE`,elements:[{name:"SIMPLE_DISPLAY_MODE"},{name:"DETAILED_DISPLAY_MODE"}]},description:""},layoutMode:{required:!1,tsType:{name:"union",raw:`| typeof DOCUMENT_LAYOUT_MODE
| typeof INLINE_DIFFS_LAYOUT_MODE
| typeof SIDE_BY_SIDE_DIFFS_LAYOUT_MODE`,elements:[{name:"DOCUMENT_LAYOUT_MODE"},{name:"INLINE_DIFFS_LAYOUT_MODE"},{name:"SIDE_BY_SIDE_DIFFS_LAYOUT_MODE"}]},description:""},filters:{required:!1,tsType:{name:"ReadonlyArray",elements:[{name:"DiffType"}],raw:"ReadonlyArray<DiffType>"},description:""},metaKeys:{required:!0,tsType:{name:"signature",type:"object",raw:`{
  diffsMetaKey: symbol;
  aggregatedDiffsMetaKey: symbol;
}`,signature:{properties:[{key:"diffsMetaKey",value:{name:"symbol",required:!0}},{key:"aggregatedDiffsMetaKey",value:{name:"symbol",required:!0}}]}},description:""}}};export{w as G};
