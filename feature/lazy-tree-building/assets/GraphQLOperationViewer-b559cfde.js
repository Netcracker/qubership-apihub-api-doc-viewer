import{j as p}from"./jsx-runtime-beaa2906.js";import{O as S,P as N,y as v,Q as m,B as w,R as x,J as P,m as G,t as f,T as M,i as D,V as T,W as b,X as L,Y as A,Z as _,_ as $,$ as C,u as O,G as I,E as V,c as R,e as Y,f as q,g as Q,h as U,F as B,j as H,k as J}from"./ErrorBoundaryFallback-41bafe09.js";import{r as E}from"./index-f46741a2.js";import{g as K,f as F,u as X,G as W,i as Z,a as g,C as z,d as j,e as ee}from"./buildASTSchema-7a468a41.js";function re(t){return({value:e,state:r,rules:o,path:d,key:n})=>{if(typeof n=="symbol")return{done:!0};if(e==null)return{done:!0};if(!o)return S(d)?{done:!0}:{value:e,state:r};if(!("kind"in o)||!N.includes(o.kind))return S(d)?{done:!0}:{value:e,state:r};const u="#"+v(d),{parent:c,container:i}=r,{kind:l}=o;let s={value:e,node:{}};switch(l){case m.query:case m.mutation:case m.subscription:{s=t.createGraphSchemaNode({id:u,kind:l,key:n,value:e,parent:c,container:i,newDataLevel:!1,isCycle:!1});break}case m.schema:{const{description:a}=e,h={value:{description:a},parent:c,container:i,meta:{...w(e)?{brokenRef:e.$ref}:{},_fragment:e},newDataLevel:!1};s.node=t.createNode(u,l,n,!1,h);break}}if(c==null||c.addChild(s.node),s.value){const a=new Map(r.alreadyConvertedMappingStack);a.set(e,s.node);const h=s.node.type===x.simple?{parent:s.node,alreadyConvertedMappingStack:a}:{parent:c,container:s.node,alreadyConvertedMappingStack:a};return{value:s.value,state:h}}else return{done:!0}}}class te extends P{createNodeMeta(e){const{value:r}=e;return G(r)==="simple"?{...f(r,$),...M(r),_fragment:r}:{_fragment:r}}createNodeValue(e){var n,u,c,i,l;const{value:r}=e;if(r==null)return null;if(!D(r))return r;if(T(r)){const s=["title","description"];return{...f(r.definition,s),...r.meta?{meta:r.meta}:{}}}let o;if(b(r)?o=r:D(r.typeDef)&&(b(r.typeDef)||L(r.typeDef))&&(o=r.typeDef),o){const s=o!==r;let a;return((n=e.parent)==null?void 0:n.kind)===A.args&&((c=(u=e.parent)==null?void 0:u.parent)==null?void 0:c.kind)===A.directiveUsage&&(a=(l=(i=e.parent.parent.value())==null?void 0:i.meta)==null?void 0:l[e.key]),{...s?f(r,C):{},...f(o,C),type:o.type.kind,..._(r.typeDef),...a!==void 0?{value:a}:{}}}return f(r,["title","description","directives"])}createGraphSchemaNode(e){return this.createJsonSchemaNode(e)}}const ne=t=>{const e=new te(t);if(!D(t))return e;const r={parent:null,alreadyConvertedMappingStack:new Map};return O(t,[I(),re(e),F(e)],{state:r,rules:K}),e},ae=t=>p.jsx(V,{fallback:p.jsx(R,{componentName:"GraphQL Operation Viewer"}),children:p.jsx(oe,{...t})}),k=new Set;function y(t,e=""){switch(t instanceof Set&&(t=Array.from(t)),t instanceof Map&&(t=Object.fromEntries(t)),typeof t){case"object":if(t===null)return"null";const r=Array.isArray(t);if(k.has(t))return r?"<circular array>":"<circular object>";if(k.add(t),r){if(t.length===0)return"[]";let n=`[
`;for(const u of t)n+=`${e} ${y(u,e+" ")},
`;return n+=`${e}]`,n}const o=Reflect.ownKeys(t);if(o.length===0)return"{}";let d=`{
`;for(const n of o)typeof n=="symbol"?d+=`${e} "${n.toString()}": ${y(t[n],e+" ")},
`:d+=`${e} "${n}": ${y(t[n],e+" ")},
`;return d+=`${e}}`,d;case"string":return`"${t}"`;case"number":return`${t}`;case"boolean":return`${t}`;case"undefined":return"undefined";case"symbol":return`"Symbol(${t.toString()})"`;case"function":return`"function(${t.toString()})"`;default:return'"unknown"'}}const oe=t=>{X();const{source:e,operationPath:r,expandedDepth:o=H,displayMode:d=J}=t,n=E.useMemo(()=>ne(e),[e]),u=E.useMemo(()=>new W(n,r,o),[o,r,n]);console.debug("GraphAPI Schema:",e),console.debug("Tree Model:",n),console.debug("State Model:",u),console.debug("GraphAPI Schema (string):",y(e));const c=u.root;return c?p.jsx(Y.Provider,{value:d,children:p.jsx(q.Provider,{value:0,children:p.jsx("div",{style:{marginLeft:0},children:c.children.map((i,l)=>{const s=`root-children-${l}`;if(Z(i)){const a=i.meta;return Q(i.node)?r||i.first?p.jsx(g,{state:i,$nodeChange:a==null?void 0:a.$nodeChange},s):null:U(i.node)&&i.first?p.jsxs("div",{children:[p.jsx(z,{layoutMode:B}),p.jsx(g,{state:i,$nodeChange:a==null?void 0:a.$nodeChange})]},s):p.jsx(g,{state:i,$nodeChange:a==null?void 0:a.$nodeChange},s)}return j(i)?p.jsx(ee,{state:i,onGlobalSelectNestedNode:()=>null},s):null})})})}):null};ae.__docgenInfo={description:"",methods:[],displayName:"GraphQLOperationViewer",props:{source:{required:!0,tsType:{name:"unknown"},description:""},operationPath:{required:!1,tsType:{name:"string"},description:""},expandedDepth:{required:!1,tsType:{name:"number"},description:""},displayMode:{required:!1,tsType:{name:"union",raw:`| typeof SIMPLE_DISPLAY_MODE
| typeof DETAILED_DISPLAY_MODE`,elements:[{name:"SIMPLE_DISPLAY_MODE"},{name:"DETAILED_DISPLAY_MODE"}]},description:""}}};export{ae as G,ne as c};
