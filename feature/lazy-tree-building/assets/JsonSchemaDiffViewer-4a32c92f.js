import{j as e}from"./_commonjs-dynamic-modules-6308e768.js";import{i as y,u,E,f as M,d as _,J as T,q as L,r as S,C as h,g as I,L as g,h as O,l as v,t as x,o as P}from"./ErrorBoundaryFallback-cd988b83.js";import{r as c}from"./index-f46741a2.js";import{j as w,b as A,T as b,J as j,a as C}from"./JsonPropNodeViewer-5cad3b67.js";import{J as F}from"./model-8db9c641.js";const J=2,Y=(a,r,t=J)=>{const{diffsMetaKey:i,aggregatedDiffsMetaKey:d}=r,s=new F(a,i,d);if(!y(a))return s;const l={parent:null,alreadyConvertedMappingStack:new Map,nodeIdPrefix:"#",treeLevel:0,maxTreeLevel:t};return u(a,A(s,a),{state:l,rules:w()}),s},K=a=>e.jsx(E,{fallback:e.jsx(M,{componentName:"JSON Schema Diff Viewer"}),children:e.jsx(N,{...a})}),N=a=>{const{schema:r,expandedDepth:t=v,displayMode:i=x,layoutMode:d=P,filters:s=[],overriddenKind:l,metaKeys:o,topLevelPropsMediaTypes:D}=a;_(r,o.diffsMetaKey,o.aggregatedDiffsMetaKey);const p=c.useMemo(()=>Y(r,o),[o,r]),m=c.useMemo(()=>new T(p,t),[t,p]);console.debug("Schema:",r),console.debug("Tree Model:",p),console.debug("State Model:",m);const n=m.root;let f=null;return L(n)&&(f=e.jsx(j,{state:n,overriddenKind:l})),S(n)&&(f=e.jsx(C,{state:n,onGlobalSelectNestedNode:()=>null})),e.jsx(b.Provider,{value:D,children:e.jsx(h.Provider,{value:s,children:e.jsx(I.Provider,{value:i,children:e.jsx(g.Provider,{value:d,children:e.jsx(O.Provider,{value:0,children:f})})})})})};K.__docgenInfo={description:"",methods:[],displayName:"JsonSchemaDiffViewer",props:{schema:{required:!0,tsType:{name:"unknown"},description:""},expandedDepth:{required:!1,tsType:{name:"number"},description:""},displayMode:{required:!1,tsType:{name:"union",raw:`| typeof SIMPLE_DISPLAY_MODE
| typeof DETAILED_DISPLAY_MODE`,elements:[{name:"SIMPLE_DISPLAY_MODE"},{name:"DETAILED_DISPLAY_MODE"}]},description:""},layoutMode:{required:!1,tsType:{name:"union",raw:`| typeof DOCUMENT_LAYOUT_MODE
| typeof INLINE_DIFFS_LAYOUT_MODE
| typeof SIDE_BY_SIDE_DIFFS_LAYOUT_MODE`,elements:[{name:"DOCUMENT_LAYOUT_MODE"},{name:"INLINE_DIFFS_LAYOUT_MODE"},{name:"SIDE_BY_SIDE_DIFFS_LAYOUT_MODE"}]},description:""},filters:{required:!1,tsType:{name:"ReadonlyArray",elements:[{name:"DiffType"}],raw:"ReadonlyArray<DiffType>"},description:""},metaKeys:{required:!0,tsType:{name:"signature",type:"object",raw:`{
  diffsMetaKey: symbol,
  aggregatedDiffsMetaKey: symbol,
}`,signature:{properties:[{key:"diffsMetaKey",value:{name:"symbol",required:!0}},{key:"aggregatedDiffsMetaKey",value:{name:"symbol",required:!0}}]}},description:""},overriddenKind:{required:!1,tsType:{name:"literal",value:"'parameters'"},description:""},topLevelPropsMediaTypes:{required:!1,tsType:{name:"Record",elements:[{name:"string"},{name:"string"}],raw:"Record<ParameterKey, MediaType>"},description:""}}};export{K as J};
