import{j as i}from"./jsx-runtime-beaa2906.js";import{O as g,P as x,y as S,Q as m,B as k,R as A,J as L,m as P,t as f,T,i as h,V as w,W as C,X as G,Y as E,Z as M,_,$ as N,u as b,G as j,E as O,c as I,e as V,f as R,g as Y,h as q,F as Q,j as U,k as B}from"./ErrorBoundaryFallback-28eaf6cc.js";import{r as v}from"./index-f46741a2.js";import{g as H,f as $,u as F,G as J,i as K,a as D,C as X,d as W,e as Z}from"./buildASTSchema-588dd810.js";function z(p){return({value:r,state:e,rules:o,path:l,key:d})=>{if(typeof d=="symbol")return{done:!0};if(r==null)return{done:!0};if(!o)return g(l)?{done:!0}:{value:r,state:e};if(!("kind"in o)||!x.includes(o.kind))return g(l)?{done:!0}:{value:r,state:e};const u="#"+S(l),{parent:s,container:a}=e,{kind:c}=o;let n={value:r,node:{}};switch(c){case m.query:case m.mutation:case m.subscription:{n=p.createGraphSchemaNode({id:u,kind:c,key:d,value:r,parent:s,container:a,newDataLevel:!1,isCycle:!1});break}case m.schema:{const{description:t}=r,y={value:{description:t},parent:s,container:a,meta:{...k(r)?{brokenRef:r.$ref}:{},_fragment:r},newDataLevel:!1};n.node=p.createNode(u,c,d,!1,y);break}}if(s==null||s.addChild(n.node),n.value){const t=new Map(e.alreadyConvertedMappingStack);t.set(r,n.node);const y=n.node.type===A.simple?{parent:n.node,alreadyConvertedMappingStack:t}:{parent:s,container:n.node,alreadyConvertedMappingStack:t};return{value:n.value,state:y}}else return{done:!0}}}class ee extends L{createNodeMeta(r){const{value:e}=r;return P(e)==="simple"?{...f(e,_),...T(e),_fragment:e}:{_fragment:e}}createNodeValue(r){var d,u,s,a,c;const{value:e}=r;if(e==null)return null;if(!h(e))return e;if(w(e)){const n=["title","description"];return{...f(e.definition,n),...e.meta?{meta:e.meta}:{}}}let o;if(C(e)?o=e:h(e.typeDef)&&(C(e.typeDef)||G(e.typeDef))&&(o=e.typeDef),o){const n=o!==e;let t;return((d=r.parent)==null?void 0:d.kind)===E.args&&((s=(u=r.parent)==null?void 0:u.parent)==null?void 0:s.kind)===E.directiveUsage&&(t=(c=(a=r.parent.parent.value())==null?void 0:a.meta)==null?void 0:c[r.key]),{...n?f(e,N):{},...f(o,N),type:o.type.kind,...M(e.typeDef),...t!==void 0?{value:t}:{}}}return f(e,["title","description","directives"])}createGraphSchemaNode(r){return this.createJsonSchemaNode(r)}}const re=p=>{const r=new ee(p);if(!h(p))return r;const e={parent:null,alreadyConvertedMappingStack:new Map};return b(p,[j(r),z(r),$(r)],{state:e,rules:H}),r},te=p=>i.jsx(O,{fallback:i.jsx(I,{componentName:"GraphQL Operation Viewer"}),children:i.jsx(ne,{...p})}),ne=p=>{F();const{source:r,operationPath:e,expandedDepth:o=U,displayMode:l=B}=p,d=v.useMemo(()=>re(r),[r]),s=v.useMemo(()=>new J(d,e,o),[o,e,d]).root;return s?i.jsx(V.Provider,{value:l,children:i.jsx(R.Provider,{value:0,children:i.jsx("div",{style:{marginLeft:0},children:s.children.map((a,c)=>{const n=`root-children-${c}`;if(K(a)){const t=a.meta;return Y(a.node)?e||a.first?i.jsx(D,{state:a,$nodeChange:t==null?void 0:t.$nodeChange},n):null:q(a.node)&&a.first?i.jsxs("div",{children:[i.jsx(X,{layoutMode:Q}),i.jsx(D,{state:a,$nodeChange:t==null?void 0:t.$nodeChange})]},n):i.jsx(D,{state:a,$nodeChange:t==null?void 0:t.$nodeChange},n)}return W(a)?i.jsx(Z,{state:a,onGlobalSelectNestedNode:()=>null},n):null})})})}):null};te.__docgenInfo={description:"",methods:[],displayName:"GraphQLOperationViewer",props:{source:{required:!0,tsType:{name:"unknown"},description:""},operationPath:{required:!1,tsType:{name:"string"},description:""},expandedDepth:{required:!1,tsType:{name:"number"},description:""},displayMode:{required:!1,tsType:{name:"union",raw:`| typeof SIMPLE_DISPLAY_MODE
| typeof DETAILED_DISPLAY_MODE`,elements:[{name:"SIMPLE_DISPLAY_MODE"},{name:"DETAILED_DISPLAY_MODE"}]},description:""}}};export{te as G};
