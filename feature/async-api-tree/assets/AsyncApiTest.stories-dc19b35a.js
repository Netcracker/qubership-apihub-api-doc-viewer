var ue=Object.defineProperty;var pe=(r,e,t)=>e in r?ue(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t;var N=(r,e,t)=>(pe(r,typeof e!="symbol"?e+"":e,t),t);import{j as o}from"./_commonjs-dynamic-modules-6308e768.js";import{ai as me,aj as ye,ak as Ne,al as Ae,am as fe,an as _e,ao as Ee,ap as Te,aq as Se,ar as ge,as as he,at as Oe,au as Pe,av as Re,aw as Me,ax as we,ay as ke,az as Ie,aA as xe,aB as Ce,aC as be,aD as ve,aE as je,aF as Le,aG as De,aH as Ve,aI as Ye,aJ as He,aK as Ke,aL as Be,aM as qe,aN as Je,aO as Ge,aP as Ue,aQ as Fe,aR as $e,aS as Xe,aT as ze,aU as We,aV as Qe,aW as Ze,aX as en,aY as W,p as nn,B as K,A as rn,N as E,I as Q,S as k,aZ as tn,a_ as sn,a0 as an,$ as B,a$ as Y,E as on,e as dn,g as ln,L as cn,o as un,h as pn,m as mn}from"./ExpandingCaret-e106a777.js";import{r as p}from"./index-f46741a2.js";import{e as yn}from"./preprocess-a40bf68d.js";import"./index-415bee12.js";const h={SIMPLE:"simple",COMPLEX:"complex"};class I{constructor(e="#",t="",n,s,a){N(this,"type");N(this,"parent");N(this,"container");N(this,"newDataLevel");N(this,"_value");N(this,"_meta");N(this,"_childrenNodes",[]);N(this,"_nestedNodes",[]);this.id=e,this.key=t,this.kind=n,this.isCycle=s;const{type:i=h.SIMPLE,value:d=null,parent:c=null,container:u=null,newDataLevel:m=!0,meta:y}=a;this.type=i,this.parent=c,this.container=u,this.newDataLevel=m,this._value=d,this._meta=y}createCycledClone(e,t,n){const s=new I(e,t,this.kind,!0,{type:this.type,parent:n,container:null,newDataLevel:this.newDataLevel,value:this._value!==null?{...this._value}:null,meta:{...this._meta}});return s.setChildrenNodes(this._childrenNodes),s.setNestedNodes(this._nestedNodes),s}value(e){return e?null:this._value}meta(){return this._meta}childrenNodes(e){return e?[]:this._childrenNodes}setChildrenNodes(e){this._childrenNodes.length=0,this._childrenNodes.push(...e)}nestedNodes(){return this._nestedNodes}setNestedNodes(e){this._nestedNodes.length=0,this._nestedNodes.push(...e)}findNestedNode(e,t=!1){if(!e&&this._nestedNodes.length)return this._nestedNodes[0];for(const n of this._nestedNodes){if(n.id===e)return n;if(t&&n instanceof x){const s=n.findNestedNode(e,t);if(s)return s}}return null}addChildNode(e){this._childrenNodes.push(e)}addNestedNode(e){this._nestedNodes.push(e)}}class x extends I{constructor(t="#",n="",s,a,i){super(t,n,s,a,i);N(this,"type");this.id=t,this.key=n,this.kind=s,this.type=i.type}createCycledClone(t,n,s){const a=new x(t,n,this.kind,!0,{type:this.type,parent:s,container:null,newDataLevel:this.newDataLevel,value:this._value!==null?{...this._value}:null,meta:{...this._meta}});return a.setChildrenNodes(this._childrenNodes),a.setNestedNodes(this._nestedNodes),a}value(t){const n=this.findNestedNode(t,!0);return(n==null?void 0:n.value())??null}children(t){const n=this.findNestedNode(t,!0);return(n==null?void 0:n.childrenNodes())??[]}}class Nn{constructor(){N(this,"nodes",new Map)}get root(){return this.nodes.get("#")??null}createSimpleNode(e,t,n,s,a){const i=new I(e,t,n,s,a);return this.nodes.set(e,i),i}createComplexNode(e,t,n,s,a){const i=new x(e,t,n,s,a);return this.nodes.set(e,i),i}createCycledClone(e,t,n,s){const a=e.createCycledClone(t,n,s);return this.nodes.set(t,a),a}}class An extends Nn{constructor(){super()}}const l={ROOT:"root",OPERATION:"operation",BINDINGS:"bindings",BINDING:"binding",JSO_PROPERTY:"jsoProperty",CHANNEL:"channel",MESSAGES:"messages",MESSAGE:"message"},fn=Object.values(l),_n={STRING:"string",NUMBER:"number",BOOLEAN:"boolean",OBJECT:"object",ARRAY:"array",JSON_SCHEMA:"jsonSchema"},En=Object.values(_n);function f(r){return typeof r=="object"&&r!==null&&!Array.isArray(r)}function C(r){return Array.isArray(r)}function Tn(r){return typeof r=="string"}class Sn{constructor(){N(this,"tree",null)}pick(e,t){if(!f(e))return null;const n={};for(const s of t){const a=String(s);if(!(a in e))continue;const i=e[a];Array.isArray(i)?n[a]=[...i]:f(i)?n[a]={...i}:n[a]=i}return this.isPartialOf(n,t)?n:null}isPartialOf(e,t){return Object.keys(e).every(n=>t.includes(n))}}const Z="<address unknown>",gn=(r,e)=>!f(e)||C(e)||e.address?e:{...e,address:Z},hn=(r,e)=>!f(e)||C(e)?e:{...e,protocol:typeof r=="symbol"?r.toString():`${r}`},v=(r,e)=>({title:typeof r=="symbol"?r.toString():`${r}`,value:e,valueType:On(e)});function On(r){return typeof r=="string"?"string":typeof r=="number"?"number":typeof r=="boolean"?"boolean":typeof r=="object"&&r!==null?Array.isArray(r)?"array":Pn(r)?"jsonSchema":Rn(r)?"multiSchema":"object":"unknown"}function Pn(r){if(typeof r!="object"||r===null)return!1;const e="type"in r&&typeof r.type=="string"&&me.some(n=>n===r.type),t=new Set([ye,Ne,Ae,fe,_e,Ee,Te,Se,ge,he,Oe,Pe,Re,Me,we,ke,Ie,xe,Ce,be,ve,je,Le,De,Ve,Ye,He,Ke,Be,qe,Je,Ge,Ue,Fe,$e,Xe,ze,We,Qe,Ze,en,W]);return e&&Object.keys(r).every(n=>t.has(n))}function Rn(r){return typeof r!="object"||r===null?!1:!!("schemaFormat"in r&&typeof r.schemaFormat=="string"&&"schema"in r&&f(r.schema))}const Mn=(r,e)=>!f(e)||C(e)?e:f(e.channel)?{...e,address:e.channel.address?e.channel.address:Z}:e,wn=(r,e)=>{if(!f(e)||C(e))return e;const{name:t,...n}=e;return{...n,...t?{internalTitle:t}:{}}};function w(r=l.ROOT){return{"/operations":{"/*":()=>({...w(l.OPERATION),transformers:[Mn]})},"/channel":()=>({...w(l.CHANNEL),"/messages":{kind:void 0},transformers:[gn]}),"/bindings":{"/*":{"/protocol":{kind:void 0},"/*":()=>({kind:l.JSO_PROPERTY,transformers:[v]}),kind:l.BINDING,transformers:[hn]},kind:l.BINDINGS,complex:!0},"/messages":{"/*":()=>({...w(l.MESSAGE),transformers:[wn]}),kind:l.MESSAGES,complex:!0},"/headers":{kind:l.JSO_PROPERTY,transformers:[v]},"/payload":{kind:l.JSO_PROPERTY,transformers:[v]},kind:r}}const A=class A extends Sn{constructor(t){super();N(this,"tree");this.source=t,this.tree=new An}static getAsyncApiTreeNodeValueProps(t){switch(t){case l.ROOT:return A.ASYNC_API_TREE_NODE_VALUE_COMMON_PROPS;case l.OPERATION:return[...A.ASYNC_API_TREE_NODE_VALUE_COMMON_PROPS,"action","address"];case l.BINDING:return[...A.ASYNC_API_TREE_NODE_VALUE_COMMON_PROPS,"protocol"];case l.JSO_PROPERTY:return[...A.ASYNC_API_TREE_NODE_VALUE_COMMON_PROPS,"value","valueType"];case l.CHANNEL:return A.ASYNC_API_TREE_NODE_VALUE_COMMON_PROPS;case l.MESSAGE:return[...A.ASYNC_API_TREE_NODE_VALUE_COMMON_PROPS,"internalTitle"];default:return[]}}build(){if(!f(this.source))return this.tree;const t={parent:null,container:null,alreadyConvertedValuesCache:new Map},n=w();return nn(this.source,[this.instantiateHookPreventingTreeBuildingProcessFromInfiniteLoop(),this.instantiateHookUnifyingValue(this.source),this.instantiateHookCreatingAsyncApiTreeNodes()],{state:t,rules:n}),this.tree}instantiateHookPreventingTreeBuildingProcessFromInfiniteLoop(){return({value:t,state:n,key:s,path:a})=>{if(typeof s=="symbol")return;const{alreadyConvertedValuesCache:i,parent:d,container:c}=n,u=i.get(t);if(!u||!this.isAsyncApiSimpleTreeNode(u)&&!this.isAsyncApiComplexTreeNode(u))return{value:t};if(!d||!this.isAsyncApiSimpleTreeNode(d))return{value:t};const m="#"+K(a),y=this.tree.createCycledClone(u,m,s,d);return c&&c.addNestedNode(y),d&&d.addChildNode(y),{done:!0}}}instantiateHookUnifyingValue(t){return({key:n,value:s,path:a,state:i,rules:d})=>!d||!Array.isArray(d.transformers)?void 0:{value:(d.transformers??[]).reduce((m,y)=>y(n,m,t,a,i),s)}}instantiateHookCreatingAsyncApiTreeNodes(){return({key:t,value:n,path:s,rules:a,state:i})=>{if(!a)return{done:!0};if(typeof t=="symbol")return{done:!0};if(n==null||!f(n)&&!rn(n))return{done:!0};if(!a.kind||!fn.includes(a.kind))return;const{parent:d,container:c}=i,u="#"+K(s),{kind:m,complex:y=!1}=a,T=c?{value:Array.isArray(n)?null:n,newDataLevel:!0,container:c,parent:c.parent}:{value:Array.isArray(n)?null:n,newDataLevel:!0,container:null,parent:d},_=this.createNodeFromRaw(u,t,m,y,T);if(!_)return;c?c.addNestedNode(_):d&&d.addChildNode(_);const g=new Map(i.alreadyConvertedValuesCache);g.set(n,_);let b;return this.isAsyncApiSimpleTreeNode(_)&&(b={parent:_,container:null,alreadyConvertedValuesCache:g}),this.isAsyncApiComplexTreeNode(_)&&(b={parent:d,container:_,alreadyConvertedValuesCache:g}),{value:n,state:b}}}createNodeFromRaw(t,n,s,a,i){const{parent:d,container:c,newDataLevel:u}=i;if(a){const _=this.createNodeMeta(n,i),g={type:h.COMPLEX,parent:d&&this.isAsyncApiSimpleTreeNode(d)?d:null,container:c&&this.isAsyncApiComplexTreeNode(c)?c:null,value:null,meta:_,newDataLevel:u};return this.tree.createComplexNode(t,n,s,!1,g)}const m=this.createNodeValue(n,s,{...i,parent:d,container:c}),y=this.createNodeMeta(n,i),T={type:h.SIMPLE,parent:d&&this.isAsyncApiSimpleTreeNode(d)?d:null,container:c&&this.isAsyncApiComplexTreeNode(c)?c:null,value:m,meta:y,newDataLevel:u};return this.tree.createSimpleNode(t,n,s,!1,T)}createNodeMeta(t,n){const{value:s,parent:a=null}=n;return{...this.isValueWithBrokenRef(s)?{brokenRef:`${s.$ref}`}:{},_fragment:s}}createNodeValue(t,n,s){const{value:a}=s;if(a==null||!f(a))return null;switch(n){case l.OPERATION:return this.pick(a,A.getAsyncApiTreeNodeValueProps(n));case l.BINDING:return this.pick(a,A.getAsyncApiTreeNodeValueProps(n));case l.JSO_PROPERTY:return this.pick(a,A.getAsyncApiTreeNodeValueProps(n));case l.CHANNEL:return this.pick(a,A.getAsyncApiTreeNodeValueProps(n));case l.MESSAGE:return this.pick(a,A.getAsyncApiTreeNodeValueProps(n));default:return null}}isAsyncApiNodeType(t){return!t||!Tn(t)?!1:En.some(n=>n===t)}isAsyncApiSimpleTreeNode(t){return t.type===h.SIMPLE}isAsyncApiComplexTreeNode(t){return!this.isAsyncApiSimpleTreeNode(t)}isValueWithBrokenRef(t){return f(t)&&W in t}getNodeComplexityType(t){return h.SIMPLE}};N(A,"ASYNC_API_TREE_NODE_META_PROPS",[]),N(A,"ASYNC_API_TREE_NODE_VALUE_COMMON_PROPS",["title","description","summary"]);let D=A;const q={[l.BINDINGS]:1,[l.CHANNEL]:2,[l.MESSAGES]:3};function kn(r,e){switch(r){case l.OPERATION:return e.sort((t,n)=>{const s=q[t.kind]??0,a=q[n.kind]??0;return s-a});default:return e}}function In(r){return r.kind===l.OPERATION}function xn(r){return r.kind===l.CHANNEL}function Cn(r){return r.kind===l.MESSAGES}function bn(r){return r.kind===l.MESSAGE}function vn(r){return r.kind===l.JSO_PROPERTY&&r.key==="headers"}function jn(r){return r.kind===l.JSO_PROPERTY&&r.key==="payload"}function ee(r){return r.kind===l.BINDINGS}function Ln(r){return r.kind===l.BINDING}const ne=r=>{const e=E();return e===Q?o.jsxs("div",{style:{fontSize:12,marginTop:4,marginBottom:4},children:["This layout mode (",e,") is not supported."]}):o.jsx(Dn,{...r})},Dn=r=>E()===k?o.jsxs("div",{className:"flex flex-row",children:[o.jsx(j,{...r}),o.jsx(j,{...r})]}):o.jsx("div",{className:"flex flex-row",children:o.jsx(j,{...r})}),Vn={send:"bg-blue-500",receive:"bg-green-500"},j=r=>{const{action:e,address:t}=r,a=E()===k?"w-1/2":"w-full";return o.jsx("div",{className:`font-Inter-Medium text-base ${a} my-2`,children:o.jsxs("div",{className:"flex flex-row items-center w-max p-3 bg-slate-100 rounded-md gap-3",children:[o.jsx("div",{className:`font-bold px-2 py-1 ${Vn[e]} text-white rounded-md`,children:e.toUpperCase()}),o.jsx("div",{className:"text-slate-500",children:t})]})})};ne.__docgenInfo={description:"",methods:[],displayName:"AddressRow",props:{action:{required:!0,tsType:{name:"string"},description:""},address:{required:!0,tsType:{name:"string"},description:""}}};const re=r=>{const{options:e,selectedOption:t,onSelectOption:n}=r;return e.length===0?null:o.jsx("div",{children:e.map(s=>{const a=s.value();return a?o.jsx("button",{className:`button-selector-option ${t===s?"selected":""}`,onClick:i=>{i.preventDefault(),i.stopPropagation(),n(s)},children:a.protocol},s.id):null})})};re.__docgenInfo={description:"",methods:[],displayName:"BindingSelector",props:{options:{required:!0,tsType:{name:"Array",elements:[{name:"ITreeNode",elements:[{name:"union",raw:"AsyncApiTreeNodeValue<K> | null",elements:[{name:"unknown"},{name:"null"}]},{name:"AsyncApiTreeNodeKinds.BINDING"},{name:"Partial",elements:[{name:"signature",type:"object",raw:`{
  readonly brokenRef?: string
  readonly _fragment: unknown
}`,signature:{properties:[{key:"brokenRef",value:{name:"string",required:!1}},{key:"_fragment",value:{name:"unknown",required:!0}}]}}],raw:`Partial<{
  readonly brokenRef?: string
  readonly _fragment: unknown
}>`}],raw:"ITreeNode<AsyncApiTreeNodeValue<K> | null, K, AsyncApiNodeMeta>"}],raw:"AsyncApiTreeNode<typeof AsyncApiTreeNodeKinds.BINDING>[]"},description:""},selectedOption:{required:!0,tsType:{name:"union",raw:"AsyncApiTreeNode<typeof AsyncApiTreeNodeKinds.BINDING> | null",elements:[{name:"ITreeNode",elements:[{name:"union",raw:"AsyncApiTreeNodeValue<K> | null",elements:[{name:"unknown"},{name:"null"}]},{name:"AsyncApiTreeNodeKinds.BINDING"},{name:"Partial",elements:[{name:"signature",type:"object",raw:`{
  readonly brokenRef?: string
  readonly _fragment: unknown
}`,signature:{properties:[{key:"brokenRef",value:{name:"string",required:!1}},{key:"_fragment",value:{name:"unknown",required:!0}}]}}],raw:`Partial<{
  readonly brokenRef?: string
  readonly _fragment: unknown
}>`}],raw:"ITreeNode<AsyncApiTreeNodeValue<K> | null, K, AsyncApiNodeMeta>"},{name:"null"}]},description:""},onSelectOption:{required:!0,tsType:{name:"signature",type:"function",raw:"(option: AsyncApiTreeNode<typeof AsyncApiTreeNodeKinds.BINDING>) => void",signature:{arguments:[{type:{name:"ITreeNode",elements:[{name:"union",raw:"AsyncApiTreeNodeValue<K> | null",elements:[{name:"unknown"},{name:"null"}]},{name:"AsyncApiTreeNodeKinds.BINDING"},{name:"Partial",elements:[{name:"signature",type:"object",raw:`{
  readonly brokenRef?: string
  readonly _fragment: unknown
}`,signature:{properties:[{key:"brokenRef",value:{name:"string",required:!1}},{key:"_fragment",value:{name:"unknown",required:!0}}]}}],raw:`Partial<{
  readonly brokenRef?: string
  readonly _fragment: unknown
}>`}],raw:"ITreeNode<AsyncApiTreeNodeValue<K> | null, K, AsyncApiNodeMeta>"},name:"option"}],return:{name:"void"}}},description:""}}};const Yn=()=>{console.warn("Expander callback is not provided.")},te=r=>{const{expandable:e,expanded:t,onClick:n,level:s}=r,a=s>0;return!e&&!a?null:o.jsxs("div",{className:`flex flex-row items-center justify-center ${a?"gap-1":""}`,children:[a&&o.jsx(tn,{short:e}),e&&t!==void 0&&o.jsx(sn,{onToggle:n??Yn,expanded:t})]})};te.__docgenInfo={description:"",methods:[],displayName:"Expander",props:{expandable:{required:!0,tsType:{name:"boolean"},description:""},expanded:{required:!1,tsType:{name:"boolean"},description:""},onClick:{required:!1,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:""},level:{required:!0,tsType:{name:"number"},description:""}}};const Hn={small:8,medium:16,large:24},se=r=>{const{level:e,gapSize:t="medium"}=r,n=Hn[t];return e===0?null:o.jsx("div",{style:{display:"flex",gap:`${n}px`,height:"100%"},children:Array.from({length:e}).map((s,a)=>o.jsx("div",{style:{width:"1px",backgroundColor:"#9e9e9e",alignSelf:"stretch"}},a))})};se.__docgenInfo={description:"",methods:[],displayName:"LevelIndicator",props:{level:{required:!0,tsType:{name:"number"},description:""},gapSize:{required:!1,tsType:{name:"union",raw:"'small' | 'medium' | 'large'",elements:[{name:"literal",value:"'small'"},{name:"literal",value:"'medium'"},{name:"literal",value:"'large'"}]},description:""}}};const O={h1:"h1",h2:"h2",h3:"h3",body:"body"},S=p.memo(r=>{const e=E();return e===Q?o.jsxs("div",{style:{fontSize:12,marginTop:4,marginBottom:4},children:["This layout mode (",e,") is not supported."]}):o.jsx(Jn,{...r})}),L=p.memo(r=>{const{expandable:e,expanded:t,onClickExpander:n,level:s,layoutSide:a,subheader:i}=r,u=E()===k?"w-1/2":"w-full",m=s>0||e;return o.jsxs("div",{className:`flex flex-row items-center gap-2 ${u}`,children:[m&&o.jsxs("div",{className:"flex flex-row items-stretch h-full",children:[o.jsx(se,{level:s}),o.jsx(te,{expandable:e,expanded:t,onClick:n,level:s})]}),o.jsx(Bn,{...r}),i==null?void 0:i(a)]})}),Kn={[O.h1]:"text-xl",[O.h2]:"text-lg",[O.h3]:"text-base",[O.body]:"text-xs"},Bn=p.memo(r=>{const{value:e,diff:t,variant:n,expandable:s,onClickExpander:a}=r,i=p.useMemo(()=>qn(e),[t,e]),d=p.useMemo(()=>["font-Inter-Medium",Kn[n],n!==O.body?"font-bold":"",s?"hover:cursor-pointer":""].join(" "),[s,n]);return o.jsx("div",{className:d,onClick:a,children:i})});function qn(r,e){return r}const Jn=p.memo(r=>E()===k?o.jsxs("div",{className:"flex flex-row",children:[o.jsx(L,{...r,layoutSide:an}),o.jsx(L,{...r,layoutSide:B})]}):o.jsx("div",{className:"flex flex-row",children:o.jsx(L,{...r,layoutSide:B})}));S.__docgenInfo={description:"",methods:[],displayName:"TitleRow",props:{value:{required:!1,tsType:{name:"string"},description:""},diff:{required:!1,tsType:{name:"Diff"},description:""},expandable:{required:!0,tsType:{name:"boolean"},description:""},expanded:{required:!1,tsType:{name:"boolean"},description:""},onClickExpander:{required:!1,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:""},level:{required:!0,tsType:{name:"number"},description:""},variant:{required:!0,tsType:{name:"TitleVariant"},description:""},subheader:{required:!1,tsType:{name:"signature",type:"function",raw:"(layoutSide: LayoutSide) => ReactElement",signature:{arguments:[{type:{name:"union",raw:`| typeof ORIGIN_LAYOUT_SIDE
| typeof CHANGED_LAYOUT_SIDE`,elements:[{name:"ORIGIN_LAYOUT_SIDE"},{name:"CHANGED_LAYOUT_SIDE"}]},name:"layoutSide"}],return:{name:"ReactElement"}}},description:""}}};const P="Bindings",J=new Map([[l.OPERATION,`Operation ${P}`],[l.CHANNEL,`Channel ${P}`],[l.MESSAGE,`Message ${P}`],[null,P]]),H=r=>{const{node:e,relatedTo:t,level:n}=r,[s,a]=p.useState(!0),i=p.useCallback(()=>{a(T=>!T)},[]),d=e.nestedNodes(),c=p.useMemo(()=>d.filter(Ln),[d]),[u,m]=p.useState(null);p.useEffect(()=>{c.length>0&&u===null&&m(c[0])},[c,u]);const y=p.useCallback(T=>o.jsx(re,{options:c,selectedOption:u,onSelectOption:m}),[c,u]);return o.jsxs("div",{className:"flex flex-col gap-1",children:[o.jsx(S,{value:J.get(t)??J.get(null),expandable:!0,expanded:s,onClickExpander:i,level:n,variant:"h3",subheader:y}),s&&o.jsx("div",{children:"Bindings content"})]})};H.__docgenInfo={description:"",methods:[],displayName:"BindingsNodeViewer",props:{node:{required:!0,tsType:{name:"ITreeNode",elements:[{name:"union",raw:"AsyncApiTreeNodeValue<K> | null",elements:[{name:"unknown"},{name:"null"}]},{name:"AsyncApiTreeNodeKinds.BINDINGS"},{name:"Partial",elements:[{name:"signature",type:"object",raw:`{
  readonly brokenRef?: string
  readonly _fragment: unknown
}`,signature:{properties:[{key:"brokenRef",value:{name:"string",required:!1}},{key:"_fragment",value:{name:"unknown",required:!0}}]}}],raw:`Partial<{
  readonly brokenRef?: string
  readonly _fragment: unknown
}>`}],raw:"ITreeNode<AsyncApiTreeNodeValue<K> | null, K, AsyncApiNodeMeta>"},description:""},relatedTo:{required:!0,tsType:{name:"AsyncApiTreeNodeKinds[union]",raw:"typeof AsyncApiTreeNodeKinds[keyof typeof AsyncApiTreeNodeKinds]"},description:""},level:{required:!0,tsType:{name:"number"},description:""}}};const ae=r=>{const{node:e,level:t}=r,n=E(),s=e.value(),a=p.useMemo(()=>`Channel ${(s==null?void 0:s.title)??e.key.toString()??""}`.trim(),[s,e]);return o.jsxs("div",{className:"flex flex-col gap-1",children:[o.jsx(S,{value:a,expandable:!1,expanded:!0,level:t,variant:"h2"}),o.jsx(Y,{value:(s==null?void 0:s.description)??"",fontSize:"base",disablePaddingLeft:!0,level:t,layoutMode:n})]})};ae.__docgenInfo={description:"",methods:[],displayName:"ChannelNodeViewer",props:{node:{required:!0,tsType:{name:"ITreeNode",elements:[{name:"union",raw:"AsyncApiTreeNodeValue<K> | null",elements:[{name:"unknown"},{name:"null"}]},{name:"AsyncApiTreeNodeKinds.CHANNEL"},{name:"Partial",elements:[{name:"signature",type:"object",raw:`{
  readonly brokenRef?: string
  readonly _fragment: unknown
}`,signature:{properties:[{key:"brokenRef",value:{name:"string",required:!1}},{key:"_fragment",value:{name:"unknown",required:!0}}]}}],raw:`Partial<{
  readonly brokenRef?: string
  readonly _fragment: unknown
}>`}],raw:"ITreeNode<AsyncApiTreeNodeValue<K> | null, K, AsyncApiNodeMeta>"},description:""},level:{required:!0,tsType:{name:"number"},description:""}}};const oe=r=>{const{options:e,selectedOption:t,onSelectOption:n}=r;return e.length===0?null:o.jsx("div",{children:e.map(s=>{const a=s.value();return a?o.jsx("button",{className:`button-selector-option ${t===s?"selected":""}`,onClick:i=>{i.preventDefault(),i.stopPropagation(),n(s)},children:a.title??a.internalTitle??"unknown"},s.id):null})})};oe.__docgenInfo={description:"",methods:[],displayName:"MessageSelector",props:{options:{required:!0,tsType:{name:"Array",elements:[{name:"ITreeNode",elements:[{name:"union",raw:"AsyncApiTreeNodeValue<K> | null",elements:[{name:"unknown"},{name:"null"}]},{name:"AsyncApiTreeNodeKinds.MESSAGE"},{name:"Partial",elements:[{name:"signature",type:"object",raw:`{
  readonly brokenRef?: string
  readonly _fragment: unknown
}`,signature:{properties:[{key:"brokenRef",value:{name:"string",required:!1}},{key:"_fragment",value:{name:"unknown",required:!0}}]}}],raw:`Partial<{
  readonly brokenRef?: string
  readonly _fragment: unknown
}>`}],raw:"ITreeNode<AsyncApiTreeNodeValue<K> | null, K, AsyncApiNodeMeta>"}],raw:"AsyncApiTreeNode<typeof AsyncApiTreeNodeKinds.MESSAGE>[]"},description:""},selectedOption:{required:!0,tsType:{name:"union",raw:"AsyncApiTreeNode<typeof AsyncApiTreeNodeKinds.MESSAGE> | null",elements:[{name:"ITreeNode",elements:[{name:"union",raw:"AsyncApiTreeNodeValue<K> | null",elements:[{name:"unknown"},{name:"null"}]},{name:"AsyncApiTreeNodeKinds.MESSAGE"},{name:"Partial",elements:[{name:"signature",type:"object",raw:`{
  readonly brokenRef?: string
  readonly _fragment: unknown
}`,signature:{properties:[{key:"brokenRef",value:{name:"string",required:!1}},{key:"_fragment",value:{name:"unknown",required:!0}}]}}],raw:`Partial<{
  readonly brokenRef?: string
  readonly _fragment: unknown
}>`}],raw:"ITreeNode<AsyncApiTreeNodeValue<K> | null, K, AsyncApiNodeMeta>"},{name:"null"}]},description:""},onSelectOption:{required:!0,tsType:{name:"signature",type:"function",raw:"(option: AsyncApiTreeNode<typeof AsyncApiTreeNodeKinds.MESSAGE>) => void",signature:{arguments:[{type:{name:"ITreeNode",elements:[{name:"union",raw:"AsyncApiTreeNodeValue<K> | null",elements:[{name:"unknown"},{name:"null"}]},{name:"AsyncApiTreeNodeKinds.MESSAGE"},{name:"Partial",elements:[{name:"signature",type:"object",raw:`{
  readonly brokenRef?: string
  readonly _fragment: unknown
}`,signature:{properties:[{key:"brokenRef",value:{name:"string",required:!1}},{key:"_fragment",value:{name:"unknown",required:!0}}]}}],raw:`Partial<{
  readonly brokenRef?: string
  readonly _fragment: unknown
}>`}],raw:"ITreeNode<AsyncApiTreeNodeValue<K> | null, K, AsyncApiNodeMeta>"},name:"option"}],return:{name:"void"}}},description:""}}};const V=r=>{const{node:e,expandable:t,expanded:n,level:s}=r,[a,i]=p.useState(n??!1),d=p.useCallback(()=>{i(c=>!c)},[]);return o.jsxs("div",{className:"flex flex-col gap-3",children:[o.jsx(S,{value:Gn(e.key),expandable:t,expanded:a,onClickExpander:d,level:s,variant:"h3"}),a&&o.jsx("div",{children:"Here will be content"})]})};function Gn(r){return r.toString().charAt(0).toUpperCase()+r.toString().slice(1)}V.__docgenInfo={description:"",methods:[],displayName:"JsoPropertyNodeViewer",props:{node:{required:!0,tsType:{name:"ITreeNode",elements:[{name:"union",raw:"AsyncApiTreeNodeValue<K> | null",elements:[{name:"unknown"},{name:"null"}]},{name:"AsyncApiTreeNodeKinds.JSO_PROPERTY"},{name:"Partial",elements:[{name:"signature",type:"object",raw:`{
  readonly brokenRef?: string
  readonly _fragment: unknown
}`,signature:{properties:[{key:"brokenRef",value:{name:"string",required:!1}},{key:"_fragment",value:{name:"unknown",required:!0}}]}}],raw:`Partial<{
  readonly brokenRef?: string
  readonly _fragment: unknown
}>`}],raw:"ITreeNode<AsyncApiTreeNodeValue<K> | null, K, AsyncApiNodeMeta>"},description:""},expandable:{required:!0,tsType:{name:"boolean"},description:""},expanded:{required:!1,tsType:{name:"boolean"},description:""},level:{required:!0,tsType:{name:"number"},description:""}}};const ie=r=>{const{node:e}=r,t=e.value(),n=(t==null?void 0:t.description)??"",s=e.childrenNodes(),a=s.find(ee),i=s.find(vn),d=s.find(jn);return o.jsxs("div",{className:"flex flex-col gap-3",children:[n&&o.jsx(Y,{value:n,level:1}),a&&o.jsx(H,{node:a,relatedTo:l.MESSAGE,level:1}),i&&o.jsx(V,{node:i,expandable:!0,level:1}),d&&o.jsx(V,{node:d,expandable:!0,level:1})]})};ie.__docgenInfo={description:"",methods:[],displayName:"MessageNodeViewer",props:{node:{required:!0,tsType:{name:"ITreeNode",elements:[{name:"union",raw:"AsyncApiTreeNodeValue<K> | null",elements:[{name:"unknown"},{name:"null"}]},{name:"AsyncApiTreeNodeKinds.MESSAGE"},{name:"Partial",elements:[{name:"signature",type:"object",raw:`{
  readonly brokenRef?: string
  readonly _fragment: unknown
}`,signature:{properties:[{key:"brokenRef",value:{name:"string",required:!1}},{key:"_fragment",value:{name:"unknown",required:!0}}]}}],raw:`Partial<{
  readonly brokenRef?: string
  readonly _fragment: unknown
}>`}],raw:"ITreeNode<AsyncApiTreeNodeValue<K> | null, K, AsyncApiNodeMeta>"},description:""}}};const de=r=>{const{node:e,level:t}=r,[n,s]=p.useState(null),i=e.nestedNodes().filter(bn);p.useEffect(()=>{i.length>0&&n===null&&s(i[0])},[i,n]);const d=p.useCallback(c=>o.jsx(oe,{options:i,selectedOption:n,onSelectOption:s}),[i,n]);return o.jsxs("div",{children:[o.jsx(S,{value:"Messages",expandable:!1,expanded:!0,level:t,variant:"h2",subheader:d}),n&&o.jsx(ie,{node:n})]})};de.__docgenInfo={description:"",methods:[],displayName:"MessagesNodeViewer",props:{node:{required:!0,tsType:{name:"ITreeNode",elements:[{name:"union",raw:"AsyncApiTreeNodeValue<K> | null",elements:[{name:"unknown"},{name:"null"}]},{name:"AsyncApiTreeNodeKinds.MESSAGES"},{name:"Partial",elements:[{name:"signature",type:"object",raw:`{
  readonly brokenRef?: string
  readonly _fragment: unknown
}`,signature:{properties:[{key:"brokenRef",value:{name:"string",required:!1}},{key:"_fragment",value:{name:"unknown",required:!0}}]}}],raw:`Partial<{
  readonly brokenRef?: string
  readonly _fragment: unknown
}>`}],raw:"ITreeNode<AsyncApiTreeNodeValue<K> | null, K, AsyncApiNodeMeta>"},description:""},level:{required:!0,tsType:{name:"number"},description:""}}};const le=r=>{const{node:e}=r,t=E(),n=e.value(),s=p.useMemo(()=>kn(l.OPERATION,e.childrenNodes()),[e]);return o.jsxs("div",{className:"flex flex-col gap-1",children:[o.jsx(S,{value:(n==null?void 0:n.title)??e.key.toString()??"No title",expandable:!1,level:0,variant:"h1"}),o.jsx(ne,{action:(n==null?void 0:n.action)??"",address:(n==null?void 0:n.address)??""}),o.jsx(Y,{value:(n==null?void 0:n.description)??"",fontSize:"base",disablePaddingLeft:!0,level:0,layoutMode:t}),o.jsx(Un,{children:s})]})},Un=r=>{const{children:e}=r;return o.jsx("div",{className:"flex flex-col gap-1",children:e.map(t=>ee(t)?o.jsx(H,{node:t,relatedTo:l.OPERATION,level:0},t.key):xn(t)?o.jsx(ae,{node:t,level:0},t.key):Cn(t)?o.jsx(de,{node:t,level:0},t.key):null)})};le.__docgenInfo={description:"",methods:[],displayName:"OperationNodeViewer",props:{node:{required:!0,tsType:{name:"ITreeNode",elements:[{name:"union",raw:"AsyncApiTreeNodeValue<K> | null",elements:[{name:"unknown"},{name:"null"}]},{name:"AsyncApiTreeNodeKinds.OPERATION"},{name:"Partial",elements:[{name:"signature",type:"object",raw:`{
  readonly brokenRef?: string
  readonly _fragment: unknown
}`,signature:{properties:[{key:"brokenRef",value:{name:"string",required:!1}},{key:"_fragment",value:{name:"unknown",required:!0}}]}}],raw:`Partial<{
  readonly brokenRef?: string
  readonly _fragment: unknown
}>`}],raw:"ITreeNode<AsyncApiTreeNodeValue<K> | null, K, AsyncApiNodeMeta>"},description:""}}};const ce=p.memo(r=>o.jsx(on,{fallback:o.jsx(dn,{componentName:"Async API Operation Viewer"}),children:o.jsx(Fn,{...r})})),Fn=p.memo(r=>{const{source:e,operationType:t,operationName:n,displayMode:s=mn}=r,i=new D(e).build();console.debug("[AsyncAPI] Tree:",i);const d=i.root;if(!d)return null;const u=d.childrenNodes().find(m=>{if(!In(m))return!1;const y=m.value();return m.key===n&&(y==null?void 0:y.action)===t});return u?o.jsx(ln.Provider,{value:s,children:o.jsxs(cn.Provider,{value:un,children:[" ",o.jsx(pn.Provider,{value:0,children:o.jsx(le,{node:u})})]})}):null});ce.__docgenInfo={description:"",methods:[],displayName:"AsyncApiOperationViewer",props:{source:{required:!0,tsType:{name:"unknown"},description:""},operationType:{required:!1,tsType:{name:"string"},description:""},operationName:{required:!1,tsType:{name:"string"},description:""},displayMode:{required:!1,tsType:{name:"union",raw:`| typeof SIMPLE_DISPLAY_MODE
| typeof DETAILED_DISPLAY_MODE`,elements:[{name:"SIMPLE_DISPLAY_MODE"},{name:"DETAILED_DISPLAY_MODE"}]},description:""}}};const nr={title:"Async Api Viewer",component:ce,parameters:{},argTypes:{source:{control:"object"}},args:{source:{}}},R={args:{source:{}}},$n={asyncapi:"3.0.0",info:{title:"example-event-service",version:"1.0.0","x-generator":"springwolf"},defaultContentType:"application/json",servers:{"kafka-main":{host:"kafka-host",protocol:"kafka"}},channels:{"customer-change-topic":{address:"customer-change-topic",description:"Channel for customer change notifications",messages:{BaseEventMessage:{$ref:"#/components/messages/BaseEventMessage"}},servers:[{$ref:"#/servers/kafka-main"}],bindings:{}}},components:{schemas:{HeadersExample:{title:"HeadersExample",type:"object",properties:{"X-Idempotency-Key":{type:"string"}},examples:[{"X-Idempotency-Key":"string"}]},BaseEvent:{title:"BaseEvent",type:"object",properties:{currentInstance:{type:"object",description:"New data state"},currentModelVersion:{type:"integer",description:"Model Version",format:"int32"},previousInstance:{type:"object",description:"Previous data state"},resourceAction:{type:"string",description:"Resource Action"},resourceType:{type:"string",description:"Resource Type"}},description:"Base event to describe Customer's data changes",examples:[{currentInstance:{},currentModelVersion:0,previousInstance:{},resourceAction:"string",resourceType:"string"}],required:["currentInstance","currentModelVersion","previousInstance","resourceAction","resourceType"]}},messages:{BaseEventMessage:{headers:{$ref:"#/components/schemas/HeadersExample"},payload:{schemaFormat:"application/vnd.aai.asyncapi+json;version=3.0.0",schema:{$ref:"#/components/schemas/BaseEvent"}},description:"Base event to describe Customer's data changes",name:"BaseEventMessage",title:"BaseEvent",bindings:{kafka:{bindingVersion:"0.5.0"}}}}},operations:{"customer-change-topic_send_BaseEvent":{action:"send",channel:{$ref:"#/channels/customer-change-topic"},title:"Customer change topic send",description:"Send events about Customer's data changes",bindings:{kafka:{bindingVersion:"0.5.0"}},messages:[{$ref:"#/channels/customer-change-topic/messages/BaseEventMessage"}]}}},M={args:{source:yn({source:$n}),operationName:"customer-change-topic_send_BaseEvent",operationType:"send"}};var G,U,F;R.parameters={...R.parameters,docs:{...(G=R.parameters)==null?void 0:G.docs,source:{originalSource:`{
  args: {
    source: {}
  }
}`,...(F=(U=R.parameters)==null?void 0:U.docs)==null?void 0:F.source}}};var $,X,z;M.parameters={...M.parameters,docs:{...($=M.parameters)==null?void 0:$.docs,source:{originalSource:`{
  args: {
    source: prepareAsyncApiDocument({
      source: KAFKA_E2E_SOURCE
    }),
    operationName: 'customer-change-topic_send_BaseEvent',
    operationType: 'send'
  }
}`,...(z=(X=M.parameters)==null?void 0:X.docs)==null?void 0:z.source}}};const rr=["Test","KafkaE2E"];export{M as KafkaE2E,R as Test,rr as __namedExportsOrder,nr as default};
