var ye=Object.defineProperty;var Ne=(r,e,t)=>e in r?ye(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t;var N=(r,e,t)=>(Ne(r,typeof e!="symbol"?e+"":e,t),t);import{j as a}from"./_commonjs-dynamic-modules-6308e768.js";import{b8 as Ae,b9 as fe,ba as _e,bb as Ee,bc as Te,bd as Se,be as ge,bf as he,bg as Oe,bh as Pe,bi as Re,bj as Me,bk as be,bl as we,bm as Ie,bn as ke,bo as xe,bp as Ce,bq as ve,br as je,bs as Le,bt as De,bu as Ye,bv as Ve,bw as He,bx as Ke,by as qe,bz as Je,bA as Be,bB as Ge,bC as Ue,bD as Fe,bE as $e,bF as ze,bG as Xe,bH as We,bI as Qe,bJ as Ze,bK as en,bL as nn,bM as rn,bN as tn,bO as ee,r as sn,K as J,H as on,Z as E,I as ne,S as w,bP as an,bQ as dn,ad as ln,ac as B,bR as K,bS as cn,bT as un,E as pn,e as mn,g as yn,L as Nn,q as An,h as fn,p as _n}from"./NestingIndicatorTitleRow-f47b395c.js";import{r as m}from"./index-f46741a2.js";import{J as G}from"./JsonSchemaViewer-33c87b9c.js";import{e as En}from"./preprocess-50d24752.js";import"./index-415bee12.js";import"./JsonPropNodeViewer-b03d10f9.js";const h={SIMPLE:"simple",COMPLEX:"complex"};class I{constructor(e="#",t="",n,s,o){N(this,"type");N(this,"parent");N(this,"container");N(this,"newDataLevel");N(this,"_value");N(this,"_meta");N(this,"_childrenNodes",[]);N(this,"_nestedNodes",[]);this.id=e,this.key=t,this.kind=n,this.isCycle=s;const{type:i=h.SIMPLE,value:d=null,parent:u=null,container:c=null,newDataLevel:p=!0,meta:y}=o;this.type=i,this.parent=u,this.container=c,this.newDataLevel=p,this._value=d,this._meta=y}createCycledClone(e,t,n){const s=new I(e,t,this.kind,!0,{type:this.type,parent:n,container:null,newDataLevel:this.newDataLevel,value:this._value!==null?{...this._value}:null,meta:{...this._meta}});return s.setChildrenNodes(this._childrenNodes),s.setNestedNodes(this._nestedNodes),s}value(e){return e?null:this._value}meta(){return this._meta}childrenNodes(e){return e?[]:this._childrenNodes}setChildrenNodes(e){this._childrenNodes.length=0,this._childrenNodes.push(...e)}nestedNodes(){return this._nestedNodes}setNestedNodes(e){this._nestedNodes.length=0,this._nestedNodes.push(...e)}findNestedNode(e,t=!1){if(!e&&this._nestedNodes.length)return this._nestedNodes[0];for(const n of this._nestedNodes){if(n.id===e)return n;if(t&&n instanceof k){const s=n.findNestedNode(e,t);if(s)return s}}return null}addChildNode(e){this._childrenNodes.push(e)}addNestedNode(e){this._nestedNodes.push(e)}}class k extends I{constructor(t="#",n="",s,o,i){super(t,n,s,o,i);N(this,"type");this.id=t,this.key=n,this.kind=s,this.type=i.type}createCycledClone(t,n,s){const o=new k(t,n,this.kind,!0,{type:this.type,parent:s,container:null,newDataLevel:this.newDataLevel,value:this._value!==null?{...this._value}:null,meta:{...this._meta}});return o.setChildrenNodes(this._childrenNodes),o.setNestedNodes(this._nestedNodes),o}value(t){const n=this.findNestedNode(t,!0);return(n==null?void 0:n.value())??null}children(t){const n=this.findNestedNode(t,!0);return(n==null?void 0:n.childrenNodes())??[]}}class Tn{constructor(){N(this,"nodes",new Map)}get root(){return this.nodes.get("#")??null}createSimpleNode(e,t,n,s,o){const i=new I(e,t,n,s,o);return this.nodes.set(e,i),i}createComplexNode(e,t,n,s,o){const i=new k(e,t,n,s,o);return this.nodes.set(e,i),i}createCycledClone(e,t,n,s){const o=e.createCycledClone(t,n,s);return this.nodes.set(t,o),o}}class Sn extends Tn{constructor(){super()}}const l={ROOT:"root",OPERATION:"operation",BINDINGS:"bindings",BINDING:"binding",JSO_PROPERTY:"jsoProperty",CHANNEL:"channel",MESSAGES:"messages",MESSAGE:"message"},gn=Object.values(l),Y={STRING:"string",NUMBER:"number",BOOLEAN:"boolean",OBJECT:"object",ARRAY:"array",JSON_SCHEMA:"jsonSchema",MULTI_SCHEMA:"multiSchema"},hn=Object.values(Y);function f(r){return typeof r=="object"&&r!==null&&!Array.isArray(r)}function x(r){return Array.isArray(r)}function On(r){return typeof r=="string"}class Pn{constructor(){N(this,"tree",null)}pick(e,t){if(!f(e))return null;const n={};for(const s of t){const o=String(s);if(!(o in e))continue;const i=e[o];Array.isArray(i)?n[o]=[...i]:f(i)?n[o]={...i}:n[o]=i}return this.isPartialOf(n,t)?n:null}isPartialOf(e,t){return Object.keys(e).every(n=>t.includes(n))}}const re="<address unknown>",Rn=(r,e)=>!f(e)||x(e)||e.address?e:{...e,address:re},Mn=(r,e)=>!f(e)||x(e)?e:{...e,protocol:typeof r=="symbol"?r.toString():`${r}`},v=(r,e)=>({title:typeof r=="symbol"?r.toString():`${r}`,value:e,valueType:bn(e)});function bn(r){return typeof r=="string"?"string":typeof r=="number"?"number":typeof r=="boolean"?"boolean":typeof r=="object"&&r!==null?Array.isArray(r)?"array":wn(r)?"jsonSchema":In(r)?"multiSchema":"object":"unknown"}function wn(r){if(typeof r!="object"||r===null)return!1;const e="type"in r&&typeof r.type=="string"&&Ae.some(n=>n===r.type),t=new Set([fe,_e,Ee,Te,Se,ge,he,Oe,Pe,Re,Me,be,we,Ie,ke,xe,Ce,ve,je,Le,De,Ye,Ve,He,Ke,qe,Je,Be,Ge,Ue,Fe,$e,ze,Xe,We,Qe,Ze,en,nn,rn,tn,ee]);return e&&Object.keys(r).every(n=>t.has(n))}function In(r){return typeof r!="object"||r===null?!1:!!("schemaFormat"in r&&typeof r.schemaFormat=="string"&&"schema"in r&&f(r.schema))}const kn=(r,e)=>!f(e)||x(e)?e:f(e.channel)?{...e,address:e.channel.address?e.channel.address:re}:e,xn=(r,e)=>{if(!f(e)||x(e))return e;const{name:t,...n}=e;return{...n,...t?{internalTitle:t}:{}}};function b(r=l.ROOT){return{"/operations":{"/*":()=>({...b(l.OPERATION),transformers:[kn]})},"/channel":()=>({...b(l.CHANNEL),"/messages":{kind:void 0},transformers:[Rn]}),"/bindings":{"/*":{"/protocol":{kind:void 0},"/*":()=>({kind:l.JSO_PROPERTY,transformers:[v]}),kind:l.BINDING,transformers:[Mn]},kind:l.BINDINGS,complex:!0},"/messages":{"/*":()=>({...b(l.MESSAGE),transformers:[xn]}),kind:l.MESSAGES,complex:!0},"/headers":{kind:l.JSO_PROPERTY,transformers:[v]},"/payload":{kind:l.JSO_PROPERTY,transformers:[v]},kind:r}}const A=class A extends Pn{constructor(t){super();N(this,"tree");this.source=t,this.tree=new Sn}static getAsyncApiTreeNodeValueProps(t){switch(t){case l.ROOT:return A.ASYNC_API_TREE_NODE_VALUE_COMMON_PROPS;case l.OPERATION:return[...A.ASYNC_API_TREE_NODE_VALUE_COMMON_PROPS,"action","address"];case l.BINDING:return[...A.ASYNC_API_TREE_NODE_VALUE_COMMON_PROPS,"protocol"];case l.JSO_PROPERTY:return[...A.ASYNC_API_TREE_NODE_VALUE_COMMON_PROPS,"value","valueType"];case l.CHANNEL:return A.ASYNC_API_TREE_NODE_VALUE_COMMON_PROPS;case l.MESSAGE:return[...A.ASYNC_API_TREE_NODE_VALUE_COMMON_PROPS,"internalTitle"];default:return[]}}build(){if(!f(this.source))return this.tree;const t={parent:null,container:null,alreadyConvertedValuesCache:new Map},n=b();return sn(this.source,[this.instantiateHookPreventingTreeBuildingProcessFromInfiniteLoop(),this.instantiateHookUnifyingValue(this.source),this.instantiateHookCreatingAsyncApiTreeNodes()],{state:t,rules:n}),this.tree}instantiateHookPreventingTreeBuildingProcessFromInfiniteLoop(){return({value:t,state:n,key:s,path:o})=>{if(typeof s=="symbol")return;const{alreadyConvertedValuesCache:i,parent:d,container:u}=n,c=i.get(t);if(!c||!this.isAsyncApiSimpleTreeNode(c)&&!this.isAsyncApiComplexTreeNode(c))return{value:t};if(!d||!this.isAsyncApiSimpleTreeNode(d))return{value:t};const p="#"+J(o),y=this.tree.createCycledClone(c,p,s,d);return u&&u.addNestedNode(y),d&&d.addChildNode(y),{done:!0}}}instantiateHookUnifyingValue(t){return({key:n,value:s,path:o,state:i,rules:d})=>!d||!Array.isArray(d.transformers)?void 0:{value:(d.transformers??[]).reduce((p,y)=>y(n,p,t,o,i),s)}}instantiateHookCreatingAsyncApiTreeNodes(){return({key:t,value:n,path:s,rules:o,state:i})=>{if(!o)return{done:!0};if(typeof t=="symbol")return{done:!0};if(n==null||!f(n)&&!on(n))return{done:!0};if(!o.kind||!gn.includes(o.kind))return;const{parent:d,container:u}=i,c="#"+J(s),{kind:p,complex:y=!1}=o,T=u?{value:Array.isArray(n)?null:n,newDataLevel:!0,container:u,parent:u.parent}:{value:Array.isArray(n)?null:n,newDataLevel:!0,container:null,parent:d},_=this.createNodeFromRaw(c,t,p,y,T);if(!_)return;u?u.addNestedNode(_):d&&d.addChildNode(_);const g=new Map(i.alreadyConvertedValuesCache);g.set(n,_);let C;return this.isAsyncApiSimpleTreeNode(_)&&(C={parent:_,container:null,alreadyConvertedValuesCache:g}),this.isAsyncApiComplexTreeNode(_)&&(C={parent:d,container:_,alreadyConvertedValuesCache:g}),{value:n,state:C}}}createNodeFromRaw(t,n,s,o,i){const{parent:d,container:u,newDataLevel:c}=i;if(o){const _=this.createNodeMeta(n,i),g={type:h.COMPLEX,parent:d&&this.isAsyncApiSimpleTreeNode(d)?d:null,container:u&&this.isAsyncApiComplexTreeNode(u)?u:null,value:null,meta:_,newDataLevel:c};return this.tree.createComplexNode(t,n,s,!1,g)}const p=this.createNodeValue(n,s,{...i,parent:d,container:u}),y=this.createNodeMeta(n,i),T={type:h.SIMPLE,parent:d&&this.isAsyncApiSimpleTreeNode(d)?d:null,container:u&&this.isAsyncApiComplexTreeNode(u)?u:null,value:p,meta:y,newDataLevel:c};return this.tree.createSimpleNode(t,n,s,!1,T)}createNodeMeta(t,n){const{value:s,parent:o=null}=n;return{...this.isValueWithBrokenRef(s)?{brokenRef:`${s.$ref}`}:{},_fragment:s}}createNodeValue(t,n,s){const{value:o}=s;if(o==null||!f(o))return null;switch(n){case l.OPERATION:return this.pick(o,A.getAsyncApiTreeNodeValueProps(n));case l.BINDING:return this.pick(o,A.getAsyncApiTreeNodeValueProps(n));case l.JSO_PROPERTY:return this.pick(o,A.getAsyncApiTreeNodeValueProps(n));case l.CHANNEL:return this.pick(o,A.getAsyncApiTreeNodeValueProps(n));case l.MESSAGE:return this.pick(o,A.getAsyncApiTreeNodeValueProps(n));default:return null}}isAsyncApiNodeType(t){return!t||!On(t)?!1:hn.some(n=>n===t)}isAsyncApiSimpleTreeNode(t){return t.type===h.SIMPLE}isAsyncApiComplexTreeNode(t){return!this.isAsyncApiSimpleTreeNode(t)}isValueWithBrokenRef(t){return f(t)&&ee in t}getNodeComplexityType(t){return h.SIMPLE}};N(A,"ASYNC_API_TREE_NODE_META_PROPS",[]),N(A,"ASYNC_API_TREE_NODE_VALUE_COMMON_PROPS",["title","description","summary"]);let V=A;const U={[l.BINDINGS]:1,[l.CHANNEL]:2,[l.MESSAGES]:3};function Cn(r,e){switch(r){case l.OPERATION:return e.sort((t,n)=>{const s=U[t.kind]??0,o=U[n.kind]??0;return s-o});default:return e}}function vn(r){return r.kind===l.OPERATION}function jn(r){return r.kind===l.CHANNEL}function Ln(r){return r.kind===l.MESSAGES}function Dn(r){return r.kind===l.MESSAGE}function Yn(r){return r.kind===l.JSO_PROPERTY&&r.key==="headers"}function Vn(r){return r.kind===l.JSO_PROPERTY&&r.key==="payload"}function te(r){return r.kind===l.BINDINGS}function Hn(r){return r.kind===l.BINDING}const se=r=>{const e=E();return e===ne?a.jsxs("div",{style:{fontSize:12,marginTop:4,marginBottom:4},children:["This layout mode (",e,") is not supported."]}):a.jsx(Kn,{...r})},Kn=r=>E()===w?a.jsxs("div",{className:"flex flex-row",children:[a.jsx(j,{...r}),a.jsx(j,{...r})]}):a.jsx("div",{className:"flex flex-row",children:a.jsx(j,{...r})}),qn={send:"bg-blue-500",receive:"bg-green-500"},j=r=>{const{action:e,address:t}=r,o=E()===w?"w-1/2":"w-full";return a.jsx("div",{className:`font-Inter-Medium text-base ${o} my-2`,children:a.jsxs("div",{className:"flex flex-row items-center w-max p-3 bg-slate-100 rounded-md gap-3",children:[a.jsx("div",{className:`font-bold px-2 py-1 ${qn[e]} text-white rounded-md`,children:e.toUpperCase()}),a.jsx("div",{className:"text-slate-500",children:t})]})})};se.__docgenInfo={description:"",methods:[],displayName:"AddressRow",props:{action:{required:!0,tsType:{name:"string"},description:""},address:{required:!0,tsType:{name:"string"},description:""}}};const oe=r=>{const{options:e,selectedOption:t,onSelectOption:n}=r;return e.length===0?null:a.jsx("div",{children:e.map(s=>{const o=s.value();return o?a.jsx("button",{className:`button-selector-option ${t===s?"selected":""}`,onClick:i=>{i.preventDefault(),i.stopPropagation(),n(s)},children:o.protocol},s.id):null})})};oe.__docgenInfo={description:"",methods:[],displayName:"BindingSelector",props:{options:{required:!0,tsType:{name:"Array",elements:[{name:"ITreeNode",elements:[{name:"union",raw:"AsyncApiTreeNodeValue<K> | null",elements:[{name:"unknown"},{name:"null"}]},{name:"AsyncApiTreeNodeKinds.BINDING"},{name:"Partial",elements:[{name:"signature",type:"object",raw:`{
  readonly brokenRef?: string
  readonly _fragment: unknown
}`,signature:{properties:[{key:"brokenRef",value:{name:"string",required:!1}},{key:"_fragment",value:{name:"unknown",required:!0}}]}}],raw:`Partial<{
  readonly brokenRef?: string
  readonly _fragment: unknown
}>`}],raw:"ITreeNode<AsyncApiTreeNodeValue<K> | null, K, AsyncApiNodeMeta>"}],raw:"AsyncApiTreeNode<typeof AsyncApiTreeNodeKinds.BINDING>[]"},description:""},selectedOption:{required:!0,tsType:{name:"union",raw:"AsyncApiTreeNode<typeof AsyncApiTreeNodeKinds.BINDING> | null",elements:[{name:"ITreeNode",elements:[{name:"union",raw:"AsyncApiTreeNodeValue<K> | null",elements:[{name:"unknown"},{name:"null"}]},{name:"AsyncApiTreeNodeKinds.BINDING"},{name:"Partial",elements:[{name:"signature",type:"object",raw:`{
  readonly brokenRef?: string
  readonly _fragment: unknown
}`,signature:{properties:[{key:"brokenRef",value:{name:"string",required:!1}},{key:"_fragment",value:{name:"unknown",required:!0}}]}}],raw:`Partial<{
  readonly brokenRef?: string
  readonly _fragment: unknown
}>`}],raw:"ITreeNode<AsyncApiTreeNodeValue<K> | null, K, AsyncApiNodeMeta>"},{name:"null"}]},description:""},onSelectOption:{required:!0,tsType:{name:"signature",type:"function",raw:"(option: AsyncApiTreeNode<typeof AsyncApiTreeNodeKinds.BINDING>) => void",signature:{arguments:[{type:{name:"ITreeNode",elements:[{name:"union",raw:"AsyncApiTreeNodeValue<K> | null",elements:[{name:"unknown"},{name:"null"}]},{name:"AsyncApiTreeNodeKinds.BINDING"},{name:"Partial",elements:[{name:"signature",type:"object",raw:`{
  readonly brokenRef?: string
  readonly _fragment: unknown
}`,signature:{properties:[{key:"brokenRef",value:{name:"string",required:!1}},{key:"_fragment",value:{name:"unknown",required:!0}}]}}],raw:`Partial<{
  readonly brokenRef?: string
  readonly _fragment: unknown
}>`}],raw:"ITreeNode<AsyncApiTreeNodeValue<K> | null, K, AsyncApiNodeMeta>"},name:"option"}],return:{name:"void"}}},description:""}}};const Jn=()=>{console.warn("Expander callback is not provided.")},ae=r=>{const{expandable:e,expanded:t,onClick:n,level:s}=r,o=s>0;return!e&&!o?null:a.jsxs("div",{className:`flex flex-row items-center justify-center ${o?"gap-1":""}`,children:[o&&a.jsx(an,{short:e}),e&&t!==void 0&&a.jsx(dn,{onToggle:n??Jn,expanded:t})]})};ae.__docgenInfo={description:"",methods:[],displayName:"Expander",props:{expandable:{required:!0,tsType:{name:"boolean"},description:""},expanded:{required:!1,tsType:{name:"boolean"},description:""},onClick:{required:!1,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:""},level:{required:!0,tsType:{name:"number"},description:""}}};const Bn={small:8,medium:16,large:24},ie=r=>{const{level:e,gapSize:t="medium"}=r,n=Bn[t];return e===0?null:a.jsx("div",{style:{display:"flex",gap:`${n}px`,height:"100%"},children:Array.from({length:e}).map((s,o)=>a.jsx("div",{style:{width:"1px",backgroundColor:"#9e9e9e",alignSelf:"stretch"}},o))})};ie.__docgenInfo={description:"",methods:[],displayName:"LevelIndicator",props:{level:{required:!0,tsType:{name:"number"},description:""},gapSize:{required:!1,tsType:{name:"union",raw:"'small' | 'medium' | 'large'",elements:[{name:"literal",value:"'small'"},{name:"literal",value:"'medium'"},{name:"literal",value:"'large'"}]},description:""}}};const O={h1:"h1",h2:"h2",h3:"h3",body:"body"},S=m.memo(r=>{const e=E();return e===ne?a.jsxs("div",{style:{fontSize:12,marginTop:4,marginBottom:4},children:["This layout mode (",e,") is not supported."]}):a.jsx($n,{...r})}),L=m.memo(r=>{const{expandable:e,expanded:t,onClickExpander:n,level:s,layoutSide:o,subheader:i}=r,c=E()===w?"w-1/2":"w-full",p=s>0||e;return a.jsxs("div",{className:`flex flex-row items-center gap-2 ${c}`,children:[p&&a.jsxs("div",{className:"flex flex-row items-stretch h-full",children:[a.jsx(ie,{level:s}),a.jsx(ae,{expandable:e,expanded:t,onClick:n,level:s})]}),a.jsx(Un,{...r}),i==null?void 0:i(o)]})}),Gn={[O.h1]:"text-xl",[O.h2]:"text-lg",[O.h3]:"text-base",[O.body]:"text-xs"},Un=m.memo(r=>{const{value:e,diff:t,variant:n,expandable:s,onClickExpander:o}=r,i=m.useMemo(()=>Fn(e),[t,e]),d=m.useMemo(()=>["font-Inter-Medium",Gn[n],n!==O.body?"font-bold":"",s?"hover:cursor-pointer":""].join(" "),[s,n]);return a.jsx("div",{className:d,onClick:o,children:i})});function Fn(r,e){return r}const $n=m.memo(r=>E()===w?a.jsxs("div",{className:"flex flex-row",children:[a.jsx(L,{...r,layoutSide:ln}),a.jsx(L,{...r,layoutSide:B})]}):a.jsx("div",{className:"flex flex-row",children:a.jsx(L,{...r,layoutSide:B})}));S.__docgenInfo={description:"",methods:[],displayName:"TitleRow",props:{value:{required:!1,tsType:{name:"string"},description:""},diff:{required:!1,tsType:{name:"Diff"},description:""},expandable:{required:!0,tsType:{name:"boolean"},description:""},expanded:{required:!1,tsType:{name:"boolean"},description:""},onClickExpander:{required:!1,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:""},level:{required:!0,tsType:{name:"number"},description:""},variant:{required:!0,tsType:{name:"TitleVariant"},description:""},subheader:{required:!1,tsType:{name:"signature",type:"function",raw:"(layoutSide: LayoutSide) => ReactElement",signature:{arguments:[{type:{name:"union",raw:`| typeof ORIGIN_LAYOUT_SIDE
| typeof CHANGED_LAYOUT_SIDE`,elements:[{name:"ORIGIN_LAYOUT_SIDE"},{name:"CHANGED_LAYOUT_SIDE"}]},name:"layoutSide"}],return:{name:"ReactElement"}}},description:""}}};const P="Bindings",F=new Map([[l.OPERATION,`Operation ${P}`],[l.CHANNEL,`Channel ${P}`],[l.MESSAGE,`Message ${P}`],[null,P]]),q=r=>{const{node:e,relatedTo:t,level:n}=r,[s,o]=m.useState(!0),i=m.useCallback(()=>{o(T=>!T)},[]),d=e.nestedNodes(),u=m.useMemo(()=>d.filter(Hn),[d]),[c,p]=m.useState(null);m.useEffect(()=>{u.length>0&&c===null&&p(u[0])},[u,c]);const y=m.useCallback(T=>a.jsx(oe,{options:u,selectedOption:c,onSelectOption:p}),[u,c]);return a.jsxs("div",{className:"flex flex-col gap-1",children:[a.jsx(S,{value:F.get(t)??F.get(null),expandable:!0,expanded:s,onClickExpander:i,level:n,variant:"h3",subheader:y}),s&&a.jsx("div",{children:"Bindings content"})]})};q.__docgenInfo={description:"",methods:[],displayName:"BindingsNodeViewer",props:{node:{required:!0,tsType:{name:"ITreeNode",elements:[{name:"union",raw:"AsyncApiTreeNodeValue<K> | null",elements:[{name:"unknown"},{name:"null"}]},{name:"AsyncApiTreeNodeKinds.BINDINGS"},{name:"Partial",elements:[{name:"signature",type:"object",raw:`{
  readonly brokenRef?: string
  readonly _fragment: unknown
}`,signature:{properties:[{key:"brokenRef",value:{name:"string",required:!1}},{key:"_fragment",value:{name:"unknown",required:!0}}]}}],raw:`Partial<{
  readonly brokenRef?: string
  readonly _fragment: unknown
}>`}],raw:"ITreeNode<AsyncApiTreeNodeValue<K> | null, K, AsyncApiNodeMeta>"},description:""},relatedTo:{required:!0,tsType:{name:"AsyncApiTreeNodeKinds[union]",raw:"typeof AsyncApiTreeNodeKinds[keyof typeof AsyncApiTreeNodeKinds]"},description:""},level:{required:!0,tsType:{name:"number"},description:""}}};const de=r=>{const{node:e,level:t}=r,n=E(),s=e.value(),o=m.useMemo(()=>`Channel ${(s==null?void 0:s.title)??e.key.toString()??""}`.trim(),[s,e]);return a.jsxs("div",{className:"flex flex-col gap-1",children:[a.jsx(S,{value:o,expandable:!1,expanded:!0,level:t,variant:"h2"}),a.jsx(K,{value:(s==null?void 0:s.description)??"",fontSize:"base",disablePaddingLeft:!0,level:t,layoutMode:n})]})};de.__docgenInfo={description:"",methods:[],displayName:"ChannelNodeViewer",props:{node:{required:!0,tsType:{name:"ITreeNode",elements:[{name:"union",raw:"AsyncApiTreeNodeValue<K> | null",elements:[{name:"unknown"},{name:"null"}]},{name:"AsyncApiTreeNodeKinds.CHANNEL"},{name:"Partial",elements:[{name:"signature",type:"object",raw:`{
  readonly brokenRef?: string
  readonly _fragment: unknown
}`,signature:{properties:[{key:"brokenRef",value:{name:"string",required:!1}},{key:"_fragment",value:{name:"unknown",required:!0}}]}}],raw:`Partial<{
  readonly brokenRef?: string
  readonly _fragment: unknown
}>`}],raw:"ITreeNode<AsyncApiTreeNodeValue<K> | null, K, AsyncApiNodeMeta>"},description:""},level:{required:!0,tsType:{name:"number"},description:""}}};const le=r=>{const{options:e,selectedOption:t,onSelectOption:n}=r;return e.length===0?null:a.jsx("div",{children:e.map(s=>{const o=s.value();return o?a.jsx("button",{className:`button-selector-option ${t===s?"selected":""}`,onClick:i=>{i.preventDefault(),i.stopPropagation(),n(s)},children:o.title??o.internalTitle??"unknown"},s.id):null})})};le.__docgenInfo={description:"",methods:[],displayName:"MessageSelector",props:{options:{required:!0,tsType:{name:"Array",elements:[{name:"ITreeNode",elements:[{name:"union",raw:"AsyncApiTreeNodeValue<K> | null",elements:[{name:"unknown"},{name:"null"}]},{name:"AsyncApiTreeNodeKinds.MESSAGE"},{name:"Partial",elements:[{name:"signature",type:"object",raw:`{
  readonly brokenRef?: string
  readonly _fragment: unknown
}`,signature:{properties:[{key:"brokenRef",value:{name:"string",required:!1}},{key:"_fragment",value:{name:"unknown",required:!0}}]}}],raw:`Partial<{
  readonly brokenRef?: string
  readonly _fragment: unknown
}>`}],raw:"ITreeNode<AsyncApiTreeNodeValue<K> | null, K, AsyncApiNodeMeta>"}],raw:"AsyncApiTreeNode<typeof AsyncApiTreeNodeKinds.MESSAGE>[]"},description:""},selectedOption:{required:!0,tsType:{name:"union",raw:"AsyncApiTreeNode<typeof AsyncApiTreeNodeKinds.MESSAGE> | null",elements:[{name:"ITreeNode",elements:[{name:"union",raw:"AsyncApiTreeNodeValue<K> | null",elements:[{name:"unknown"},{name:"null"}]},{name:"AsyncApiTreeNodeKinds.MESSAGE"},{name:"Partial",elements:[{name:"signature",type:"object",raw:`{
  readonly brokenRef?: string
  readonly _fragment: unknown
}`,signature:{properties:[{key:"brokenRef",value:{name:"string",required:!1}},{key:"_fragment",value:{name:"unknown",required:!0}}]}}],raw:`Partial<{
  readonly brokenRef?: string
  readonly _fragment: unknown
}>`}],raw:"ITreeNode<AsyncApiTreeNodeValue<K> | null, K, AsyncApiNodeMeta>"},{name:"null"}]},description:""},onSelectOption:{required:!0,tsType:{name:"signature",type:"function",raw:"(option: AsyncApiTreeNode<typeof AsyncApiTreeNodeKinds.MESSAGE>) => void",signature:{arguments:[{type:{name:"ITreeNode",elements:[{name:"union",raw:"AsyncApiTreeNodeValue<K> | null",elements:[{name:"unknown"},{name:"null"}]},{name:"AsyncApiTreeNodeKinds.MESSAGE"},{name:"Partial",elements:[{name:"signature",type:"object",raw:`{
  readonly brokenRef?: string
  readonly _fragment: unknown
}`,signature:{properties:[{key:"brokenRef",value:{name:"string",required:!1}},{key:"_fragment",value:{name:"unknown",required:!0}}]}}],raw:`Partial<{
  readonly brokenRef?: string
  readonly _fragment: unknown
}>`}],raw:"ITreeNode<AsyncApiTreeNodeValue<K> | null, K, AsyncApiNodeMeta>"},name:"option"}],return:{name:"void"}}},description:""}}};const H=r=>{const{node:e,expandable:t,expanded:n,level:s}=r,o=cn(),[i,d]=m.useState(n??!1),u=m.useCallback(()=>{d(p=>!p)},[]),c=e.value();if((c==null?void 0:c.valueType)===Y.JSON_SCHEMA){const p=c.value;return a.jsx(G,{schema:p,expandedDepth:2,displayMode:o,customizationOptions:{headerRowTitle:D(e.key)}})}if((c==null?void 0:c.valueType)===Y.MULTI_SCHEMA){const p=un(c.value)&&"schema"in c.value?c.value.schema:void 0;return a.jsx(G,{schema:p,expandedDepth:2,displayMode:o,customizationOptions:{headerRowTitle:D(e.key)}})}return a.jsxs("div",{className:"flex flex-col gap-3",children:[a.jsx(S,{value:D(e.key),expandable:t,expanded:i,onClickExpander:u,level:s,variant:"h3"}),i&&a.jsx("div",{children:"Here will be content"})]})};function D(r){return r.toString().charAt(0).toUpperCase()+r.toString().slice(1)}H.__docgenInfo={description:"",methods:[],displayName:"JsoPropertyNodeViewer",props:{node:{required:!0,tsType:{name:"ITreeNode",elements:[{name:"union",raw:"AsyncApiTreeNodeValue<K> | null",elements:[{name:"unknown"},{name:"null"}]},{name:"AsyncApiTreeNodeKinds.JSO_PROPERTY"},{name:"Partial",elements:[{name:"signature",type:"object",raw:`{
  readonly brokenRef?: string
  readonly _fragment: unknown
}`,signature:{properties:[{key:"brokenRef",value:{name:"string",required:!1}},{key:"_fragment",value:{name:"unknown",required:!0}}]}}],raw:`Partial<{
  readonly brokenRef?: string
  readonly _fragment: unknown
}>`}],raw:"ITreeNode<AsyncApiTreeNodeValue<K> | null, K, AsyncApiNodeMeta>"},description:""},expandable:{required:!0,tsType:{name:"boolean"},description:""},expanded:{required:!1,tsType:{name:"boolean"},description:""},level:{required:!0,tsType:{name:"number"},description:""}}};const ce=r=>{const{node:e}=r,t=e.value(),n=(t==null?void 0:t.description)??"",s=e.childrenNodes(),o=s.find(te),i=s.find(Yn),d=s.find(Vn);return a.jsxs("div",{className:"flex flex-col gap-3",children:[n&&a.jsx(K,{value:n,level:1}),o&&a.jsx(q,{node:o,relatedTo:l.MESSAGE,level:1}),i&&a.jsx(H,{node:i,expandable:!0,level:1}),d&&a.jsx(H,{node:d,expandable:!0,level:1})]})};ce.__docgenInfo={description:"",methods:[],displayName:"MessageNodeViewer",props:{node:{required:!0,tsType:{name:"ITreeNode",elements:[{name:"union",raw:"AsyncApiTreeNodeValue<K> | null",elements:[{name:"unknown"},{name:"null"}]},{name:"AsyncApiTreeNodeKinds.MESSAGE"},{name:"Partial",elements:[{name:"signature",type:"object",raw:`{
  readonly brokenRef?: string
  readonly _fragment: unknown
}`,signature:{properties:[{key:"brokenRef",value:{name:"string",required:!1}},{key:"_fragment",value:{name:"unknown",required:!0}}]}}],raw:`Partial<{
  readonly brokenRef?: string
  readonly _fragment: unknown
}>`}],raw:"ITreeNode<AsyncApiTreeNodeValue<K> | null, K, AsyncApiNodeMeta>"},description:""}}};const ue=r=>{const{node:e,level:t}=r,[n,s]=m.useState(null),i=e.nestedNodes().filter(Dn);m.useEffect(()=>{i.length>0&&n===null&&s(i[0])},[i,n]);const d=m.useCallback(u=>a.jsx(le,{options:i,selectedOption:n,onSelectOption:s}),[i,n]);return a.jsxs("div",{children:[a.jsx(S,{value:"Messages",expandable:!1,expanded:!0,level:t,variant:"h2",subheader:d}),n&&a.jsx(ce,{node:n})]})};ue.__docgenInfo={description:"",methods:[],displayName:"MessagesNodeViewer",props:{node:{required:!0,tsType:{name:"ITreeNode",elements:[{name:"union",raw:"AsyncApiTreeNodeValue<K> | null",elements:[{name:"unknown"},{name:"null"}]},{name:"AsyncApiTreeNodeKinds.MESSAGES"},{name:"Partial",elements:[{name:"signature",type:"object",raw:`{
  readonly brokenRef?: string
  readonly _fragment: unknown
}`,signature:{properties:[{key:"brokenRef",value:{name:"string",required:!1}},{key:"_fragment",value:{name:"unknown",required:!0}}]}}],raw:`Partial<{
  readonly brokenRef?: string
  readonly _fragment: unknown
}>`}],raw:"ITreeNode<AsyncApiTreeNodeValue<K> | null, K, AsyncApiNodeMeta>"},description:""},level:{required:!0,tsType:{name:"number"},description:""}}};const pe=r=>{const{node:e}=r,t=E(),n=e.value(),s=m.useMemo(()=>Cn(l.OPERATION,e.childrenNodes()),[e]);return a.jsxs("div",{className:"flex flex-col gap-1",children:[a.jsx(S,{value:(n==null?void 0:n.title)??e.key.toString()??"No title",expandable:!1,level:0,variant:"h1"}),a.jsx(se,{action:(n==null?void 0:n.action)??"",address:(n==null?void 0:n.address)??""}),a.jsx(K,{value:(n==null?void 0:n.description)??"",fontSize:"base",disablePaddingLeft:!0,level:0,layoutMode:t}),a.jsx(zn,{children:s})]})},zn=r=>{const{children:e}=r;return a.jsx("div",{className:"flex flex-col gap-1",children:e.map(t=>te(t)?a.jsx(q,{node:t,relatedTo:l.OPERATION,level:0},t.key):jn(t)?a.jsx(de,{node:t,level:0},t.key):Ln(t)?a.jsx(ue,{node:t,level:0},t.key):null)})};pe.__docgenInfo={description:"",methods:[],displayName:"OperationNodeViewer",props:{node:{required:!0,tsType:{name:"ITreeNode",elements:[{name:"union",raw:"AsyncApiTreeNodeValue<K> | null",elements:[{name:"unknown"},{name:"null"}]},{name:"AsyncApiTreeNodeKinds.OPERATION"},{name:"Partial",elements:[{name:"signature",type:"object",raw:`{
  readonly brokenRef?: string
  readonly _fragment: unknown
}`,signature:{properties:[{key:"brokenRef",value:{name:"string",required:!1}},{key:"_fragment",value:{name:"unknown",required:!0}}]}}],raw:`Partial<{
  readonly brokenRef?: string
  readonly _fragment: unknown
}>`}],raw:"ITreeNode<AsyncApiTreeNodeValue<K> | null, K, AsyncApiNodeMeta>"},description:""}}};const me=m.memo(r=>a.jsx(pn,{fallback:a.jsx(mn,{componentName:"Async API Operation Viewer"}),children:a.jsx(Xn,{...r})})),Xn=m.memo(r=>{const{source:e,operationType:t,operationName:n,displayMode:s=_n}=r,i=new V(e).build();console.debug("[AsyncAPI] Source:",e),console.debug("[AsyncAPI] Tree:",i);const d=i.root;if(!d)return null;const c=d.childrenNodes().find(p=>{if(!vn(p))return!1;const y=p.value();return p.key===n&&(y==null?void 0:y.action)===t});return c?a.jsx(yn.Provider,{value:s,children:a.jsxs(Nn.Provider,{value:An,children:[" ",a.jsx(fn.Provider,{value:0,children:a.jsx(pe,{node:c})})]})}):null});me.__docgenInfo={description:"",methods:[],displayName:"AsyncApiOperationViewer",props:{source:{required:!0,tsType:{name:"unknown"},description:""},operationType:{required:!1,tsType:{name:"string"},description:""},operationName:{required:!1,tsType:{name:"string"},description:""},displayMode:{required:!1,tsType:{name:"union",raw:`| typeof SIMPLE_DISPLAY_MODE
| typeof DETAILED_DISPLAY_MODE`,elements:[{name:"SIMPLE_DISPLAY_MODE"},{name:"DETAILED_DISPLAY_MODE"}]},description:""}}};const ar={title:"Async Api Viewer",component:me,parameters:{},argTypes:{source:{control:"object"}},args:{source:{}}},R={args:{source:{}}},Wn={asyncapi:"3.0.0",info:{title:"example-event-service",version:"1.0.0","x-generator":"springwolf"},defaultContentType:"application/json",servers:{"kafka-main":{host:"kafka-host",protocol:"kafka"}},channels:{"customer-change-topic":{address:"customer-change-topic",description:"Channel for customer change notifications",messages:{BaseEventMessage:{$ref:"#/components/messages/BaseEventMessage"}},servers:[{$ref:"#/servers/kafka-main"}],bindings:{}}},components:{schemas:{HeadersExample:{title:"HeadersExample",type:"object",properties:{"X-Idempotency-Key":{type:"string"}},examples:[{"X-Idempotency-Key":"string"}]},BaseEvent:{title:"BaseEvent",type:"object",properties:{currentInstance:{type:"object",description:"New data state"},currentModelVersion:{type:"integer",description:"Model Version",format:"int32"},previousInstance:{type:"object",description:"Previous data state"},resourceAction:{type:"string",description:"Resource Action"},resourceType:{type:"string",description:"Resource Type"}},description:"Base event to describe Customer's data changes",examples:[{currentInstance:{},currentModelVersion:0,previousInstance:{},resourceAction:"string",resourceType:"string"}],required:["currentInstance","currentModelVersion","previousInstance","resourceAction","resourceType"]}},messages:{BaseEventMessage:{headers:{$ref:"#/components/schemas/HeadersExample"},payload:{schemaFormat:"application/vnd.aai.asyncapi+json;version=3.0.0",schema:{$ref:"#/components/schemas/BaseEvent"}},description:"Base event to describe Customer's data changes",name:"BaseEventMessage",title:"BaseEvent",bindings:{kafka:{bindingVersion:"0.5.0"}}}}},operations:{"customer-change-topic_send_BaseEvent":{action:"send",channel:{$ref:"#/channels/customer-change-topic"},title:"Customer change topic send",description:"Send events about Customer's data changes",bindings:{kafka:{bindingVersion:"0.5.0"}},messages:[{$ref:"#/channels/customer-change-topic/messages/BaseEventMessage"}]}}},M={args:{source:En({source:Wn}),operationName:"customer-change-topic_send_BaseEvent",operationType:"send"}};var $,z,X;R.parameters={...R.parameters,docs:{...($=R.parameters)==null?void 0:$.docs,source:{originalSource:`{
  args: {
    source: {}
  }
}`,...(X=(z=R.parameters)==null?void 0:z.docs)==null?void 0:X.source}}};var W,Q,Z;M.parameters={...M.parameters,docs:{...(W=M.parameters)==null?void 0:W.docs,source:{originalSource:`{
  args: {
    source: prepareAsyncApiDocument({
      source: KAFKA_E2E_SOURCE
    }),
    operationName: 'customer-change-topic_send_BaseEvent',
    operationType: 'send'
  }
}`,...(Z=(Q=M.parameters)==null?void 0:Q.docs)==null?void 0:Z.source}}};const ir=["Test","KafkaE2E"];export{M as KafkaE2E,R as Test,ir as __namedExportsOrder,ar as default};
