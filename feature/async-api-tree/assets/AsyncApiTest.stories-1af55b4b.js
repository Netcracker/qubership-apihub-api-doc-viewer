var ae=Object.defineProperty;var ie=(t,n,r)=>n in t?ae(t,n,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[n]=r;var k=(t,n,r)=>(ie(t,typeof n!="symbol"?n+"":n,r),r);import{j as o}from"./_commonjs-dynamic-modules-6308e768.js";import{y as de,z as D,A as le,J as ce,B as T,I as ue,S as U,F as W,H as pe,K as j,E as me,e as ye,h as Ae,L as fe,w as Ne,j as ge,M as xe}from"./GraphPropNodeViewer-d401b900.js";import{T as Ee,i as N,b as h,c as Te,d as w,e as he,f as g,g as X,a as K}from"./JsoViewer-7e1efc43.js";import{r as m}from"./index-f46741a2.js";import{e as Se}from"./preprocess-e4c61c36.js";import"./index-415bee12.js";import"./GraphQLOperationViewer-7ebb1131.js";import"./GraphQLOperationDiffViewer-08a7542d.js";class ke extends Ee{constructor(){super()}}const i={ROOT:"root",OPERATION:"operation",BINDINGS:"bindings",BINDING:"binding",CHANNEL:"channel",MESSAGES:"messages",MESSAGE:"message",MESSAGE_HEADERS:"messageHeaders",MESSAGE_PAYLOAD:"messagePayload"},we=Object.values(i),b=(t,n)=>{if(!N(n)||h(n))return n;const r=Reflect.ownKeys(n),e=r.filter(d=>typeof d=="string"&&d.startsWith("x-")),s=new Set(e),a=e.reduce((d,c)=>{const u=n[c];return{...d,[c]:u}},{}),l={};for(const d of r)typeof d=="string"&&s.has(d)||(l[d]=n[d]);return l.extensions=a,l},J="<address unknown>",be=(t,n)=>!N(n)||h(n)||n.address?n:{...n,address:J},Ie=(t,n)=>{if(!N(n)||h(n))return n;const{bindingVersion:r,...e}=n;return{binding:e,version:r,protocol:typeof t=="symbol"?t.toString():`${t}`}},_e=(t,n)=>!N(n)||h(n)?n:N(n.channel)?{...n,address:n.channel.address?n.channel.address:J}:n,Me=(t,n)=>{if(!N(n)||h(n))return n;const{name:r,...e}=n;return{...e,...r?{internalTitle:r}:{}}},V=(t,n)=>N(n)?{schema:n.schema??n,schemaFormat:n.schemaFormat??null}:null;function O(t=i.ROOT){return{"/operations":{"/*":()=>({...O(i.OPERATION),transformers:[_e,b]})},"/channel":()=>({...O(i.CHANNEL),"/messages":{kind:void 0},transformers:[be,b]}),"/bindings":{"/*":{kind:i.BINDING,transformers:[b,Ie]},kind:i.BINDINGS,complex:!0},"/messages":{"/*":()=>({...O(i.MESSAGE),transformers:[Me,b]}),kind:i.MESSAGES,complex:!0},"/headers":{kind:i.MESSAGE_HEADERS,transformers:[V]},"/payload":{kind:i.MESSAGE_PAYLOAD,transformers:[V]},kind:t}}const A=class A extends Te{constructor(r){super();k(this,"tree");this.source=r,this.tree=new ke}static getAsyncApiTreeNodeValueProps(r){switch(r){case i.ROOT:return A.ASYNC_API_TREE_NODE_VALUE_COMMON_PROPS;case i.OPERATION:return[...A.ASYNC_API_TREE_NODE_VALUE_COMMON_PROPS,"action","address","extensions"];case i.BINDING:return["binding","version","protocol","extensions"];case i.CHANNEL:return[...A.ASYNC_API_TREE_NODE_VALUE_COMMON_PROPS,"extensions"];case i.MESSAGE:return[...A.ASYNC_API_TREE_NODE_VALUE_COMMON_PROPS,"internalTitle","extensions"];case i.MESSAGE_HEADERS:return["schema","schemaFormat"];case i.MESSAGE_PAYLOAD:return["schema","schemaFormat"];default:return[]}}build(){if(!N(this.source))return this.tree;const r={parent:null,container:null,alreadyConvertedValuesCache:new Map},e=O();return de(this.source,[this.instantiateHookPreventingTreeBuildingProcessFromInfiniteLoop(),this.instantiateHookUnifyingValue(this.source),this.instantiateHookCreatingAsyncApiTreeNodes()],{state:r,rules:e}),this.tree}instantiateHookPreventingTreeBuildingProcessFromInfiniteLoop(){return({value:r,state:e,key:s,path:a})=>{if(typeof s=="symbol")return;const{alreadyConvertedValuesCache:l,parent:d,container:c}=e,u=l.get(r);if(!u||!this.isAsyncApiSimpleTreeNode(u)&&!this.isAsyncApiComplexTreeNode(u))return{value:r};if(!d||!this.isAsyncApiSimpleTreeNode(d))return{value:r};const y="#"+D(a),p=this.tree.createCycledClone(u,y,s,d);return c&&c.addNestedNode(p),d&&d.addChildNode(p),{done:!0}}}instantiateHookUnifyingValue(r){return({key:e,value:s,path:a,state:l,rules:d})=>!d||!Array.isArray(d.transformers)?void 0:{value:(d.transformers??[]).reduce((y,p)=>p(e,y,r,a,l),s)}}instantiateHookCreatingAsyncApiTreeNodes(){return({key:r,value:e,path:s,rules:a,state:l})=>{if(!a)return{done:!0};if(typeof r=="symbol")return{done:!0};if(e==null||!N(e)&&!le(e))return{done:!0};if(!a.kind||!we.includes(a.kind))return;const{parent:d,container:c}=l,u="#"+D(s),{kind:y,complex:p=!1}=a,x=c?{value:Array.isArray(e)?null:e,newDataLevel:!0,container:c,parent:c.parent}:{value:Array.isArray(e)?null:e,newDataLevel:!0,container:null,parent:d},f=this.createNodeFromRaw(u,r,y,p,x);if(!f)return;if(c?c.addNestedNode(f):d&&d.addChildNode(f),N(e)&&e.isPrimitive)return{done:!0};const E=new Map(l.alreadyConvertedValuesCache);E.set(e,f);let P;return this.isAsyncApiSimpleTreeNode(f)&&(P={parent:f,container:null,alreadyConvertedValuesCache:E}),this.isAsyncApiComplexTreeNode(f)&&(P={parent:d,container:f,alreadyConvertedValuesCache:E}),{value:e,state:P}}}createNodeFromRaw(r,e,s,a,l){const{parent:d,container:c,newDataLevel:u}=l;if(a){const f=this.createNodeMeta(e,l),E={type:w.COMPLEX,parent:d&&this.isAsyncApiSimpleTreeNode(d)?d:null,container:c&&this.isAsyncApiComplexTreeNode(c)?c:null,value:null,meta:f,newDataLevel:u};return this.tree.createComplexNode(r,e,s,!1,E)}const y=this.createNodeValue(e,s,{...l,parent:d,container:c}),p=this.createNodeMeta(e,l),x={type:w.SIMPLE,parent:d&&this.isAsyncApiSimpleTreeNode(d)?d:null,container:c&&this.isAsyncApiComplexTreeNode(c)?c:null,value:y,meta:p,newDataLevel:u};return this.tree.createSimpleNode(r,e,s,!1,x)}createNodeMeta(r,e){const{value:s,parent:a=null}=e;return{...this.isValueWithBrokenRef(s)?{brokenRef:`${s.$ref}`}:{},_fragment:s}}createNodeValue(r,e,s){const{value:a}=s;if(a==null||!he(a))return null;switch(e){case i.OPERATION:return this.pick(a,A.getAsyncApiTreeNodeValueProps(e));case i.BINDING:return this.pick(a,A.getAsyncApiTreeNodeValueProps(e));case i.CHANNEL:return this.pick(a,A.getAsyncApiTreeNodeValueProps(e));case i.MESSAGE:return this.pick(a,A.getAsyncApiTreeNodeValueProps(e));case i.MESSAGE_HEADERS:return this.pick(a,A.getAsyncApiTreeNodeValueProps(e));case i.MESSAGE_PAYLOAD:return this.pick(a,A.getAsyncApiTreeNodeValueProps(e));default:return null}}isAsyncApiSimpleTreeNode(r){return r.type===w.SIMPLE}isAsyncApiComplexTreeNode(r){return!this.isAsyncApiSimpleTreeNode(r)}isValueWithBrokenRef(r){return N(r)&&ce in r}getNodeComplexityType(r){return w.SIMPLE}};k(A,"ASYNC_API_TREE_NODE_META_PROPS",[]),k(A,"ASYNC_API_TREE_NODE_VALUE_COMMON_PROPS",["title","description","summary"]);let C=A;const L={[i.BINDINGS]:1,[i.CHANNEL]:2,[i.MESSAGES]:3};function Oe(t,n){switch(t){case i.OPERATION:return n.sort((r,e)=>{const s=L[r.kind]??0,a=L[e.kind]??0;return s-a});default:return n}}function Pe(t){return t.kind===i.OPERATION}function Re(t){return t.kind===i.CHANNEL}function Ce(t){return t.kind===i.MESSAGES}function je(t){return t.kind===i.MESSAGE}function ve(t){return t.kind===i.MESSAGE_HEADERS&&t.key==="headers"}function De(t){return t.kind===i.MESSAGE_PAYLOAD&&t.key==="payload"}function z(t){return t.kind===i.BINDINGS}function Ke(t){return t.kind===i.BINDING}const Q=t=>{const n=T();return n===ue?o.jsxs("div",{style:{fontSize:12,marginTop:4,marginBottom:4},children:["This layout mode (",n,") is not supported."]}):o.jsx(Ve,{...t})},Ve=t=>T()===U?o.jsxs("div",{className:"flex flex-row",children:[o.jsx(R,{...t}),o.jsx(R,{...t})]}):o.jsx("div",{className:"flex flex-row",children:o.jsx(R,{...t})}),Le={send:"bg-blue-500",receive:"bg-green-500"},R=t=>{const{action:n,address:r}=t,a=T()===U?"w-1/2":"w-full";return o.jsx("div",{className:`font-Inter-Medium text-base ${a} my-2`,children:o.jsxs("div",{className:"flex flex-row items-center w-max p-3 bg-slate-100 rounded-md gap-3",children:[o.jsx("div",{className:`font-bold px-2 py-1 ${Le[n]} text-white rounded-md`,children:n.toUpperCase()}),o.jsx("div",{className:"text-slate-500",children:r})]})})};Q.__docgenInfo={description:"",methods:[],displayName:"AddressRow",props:{action:{required:!0,tsType:{name:"string"},description:""},address:{required:!0,tsType:{name:"string"},description:""}}};const Z=t=>{const{options:n,selectedOption:r,onSelectOption:e}=t;return n.length===0?null:o.jsx("div",{children:n.map(s=>{const a=s.value();return a?o.jsx("button",{className:`button-selector-option ${r===s?"selected":""}`,onClick:l=>{l.preventDefault(),l.stopPropagation(),e(s)},children:a.protocol},s.id):null})})};Z.__docgenInfo={description:"",methods:[],displayName:"BindingSelector",props:{options:{required:!0,tsType:{name:"Array",elements:[{name:"ITreeNode",elements:[{name:"union",raw:"AsyncApiTreeNodeValue<K> | null",elements:[{name:"unknown"},{name:"null"}]},{name:"AsyncApiTreeNodeKinds.BINDING"},{name:"Partial",elements:[{name:"signature",type:"object",raw:`{
  readonly brokenRef?: string
  readonly _fragment: unknown
}`,signature:{properties:[{key:"brokenRef",value:{name:"string",required:!1}},{key:"_fragment",value:{name:"unknown",required:!0}}]}}],raw:`Partial<{
  readonly brokenRef?: string
  readonly _fragment: unknown
}>`}],raw:"ITreeNode<AsyncApiTreeNodeValue<K> | null, K, AsyncApiNodeMeta>"}],raw:"AsyncApiTreeNode<typeof AsyncApiTreeNodeKinds.BINDING>[]"},description:""},selectedOption:{required:!0,tsType:{name:"union",raw:"AsyncApiTreeNode<typeof AsyncApiTreeNodeKinds.BINDING> | null",elements:[{name:"ITreeNode",elements:[{name:"union",raw:"AsyncApiTreeNodeValue<K> | null",elements:[{name:"unknown"},{name:"null"}]},{name:"AsyncApiTreeNodeKinds.BINDING"},{name:"Partial",elements:[{name:"signature",type:"object",raw:`{
  readonly brokenRef?: string
  readonly _fragment: unknown
}`,signature:{properties:[{key:"brokenRef",value:{name:"string",required:!1}},{key:"_fragment",value:{name:"unknown",required:!0}}]}}],raw:`Partial<{
  readonly brokenRef?: string
  readonly _fragment: unknown
}>`}],raw:"ITreeNode<AsyncApiTreeNodeValue<K> | null, K, AsyncApiNodeMeta>"},{name:"null"}]},description:""},onSelectOption:{required:!0,tsType:{name:"signature",type:"function",raw:"(option: AsyncApiTreeNode<typeof AsyncApiTreeNodeKinds.BINDING>) => void",signature:{arguments:[{type:{name:"ITreeNode",elements:[{name:"union",raw:"AsyncApiTreeNodeValue<K> | null",elements:[{name:"unknown"},{name:"null"}]},{name:"AsyncApiTreeNodeKinds.BINDING"},{name:"Partial",elements:[{name:"signature",type:"object",raw:`{
  readonly brokenRef?: string
  readonly _fragment: unknown
}`,signature:{properties:[{key:"brokenRef",value:{name:"string",required:!1}},{key:"_fragment",value:{name:"unknown",required:!0}}]}}],raw:`Partial<{
  readonly brokenRef?: string
  readonly _fragment: unknown
}>`}],raw:"ITreeNode<AsyncApiTreeNodeValue<K> | null, K, AsyncApiNodeMeta>"},name:"option"}],return:{name:"void"}}},description:""}}};const S=t=>{const{values:n,kind:r}=t,e=m.useMemo(()=>{switch(r){case i.OPERATION:return"Operation Extensions";case i.CHANNEL:return"Channel Extensions";case i.MESSAGE:return"Message Extensions";case i.BINDING:return"Binding Extensions";default:return"Extensions"}},[r]),s=m.useMemo(()=>{switch(r){case i.BINDING:return"h4";default:return"h3"}},[r]);return o.jsxs(o.Fragment,{children:[o.jsx(g,{value:e,expandable:!1,variant:s}),o.jsx(X,{source:n,initialLevel:1})]})};S.__docgenInfo={description:"",methods:[],displayName:"SpecificationExtensions",props:{values:{required:!0,tsType:{name:"Record",elements:[{name:"literal",value:"`${typeof SPECIFICATION_EXTENSION_PREFIX}${string}`"},{name:"unknown"}],raw:"Record<SpecificationExtensionKey, unknown>"},description:""},kind:{required:!0,tsType:{name:"AsyncApiTreeNodeKinds[union]",raw:"typeof AsyncApiTreeNodeKinds[keyof typeof AsyncApiTreeNodeKinds]"},description:""}}};const I="Bindings",B=new Map([[i.OPERATION,`Operation ${I}`],[i.CHANNEL,`Channel ${I}`],[i.MESSAGE,`Message ${I}`],[null,I]]),v=t=>{const{node:n,relatedTo:r}=t,e=W(),[s,a]=m.useState(null),l=n.nestedNodes(),d=m.useMemo(()=>l.filter(Ke),[l]),c=s==null?void 0:s.value(),{version:u=null,binding:y=null}=c??{};m.useEffect(()=>{d.length>0&&s===null&&a(d[0])},[d,s]);const p=m.useCallback(f=>o.jsx(Z,{options:d,selectedOption:s,onSelectOption:a}),[d,s]),x=m.useMemo(()=>(c==null?void 0:c.extensions)??{},[c==null?void 0:c.extensions]);return o.jsxs("div",{className:"flex flex-col gap-1",children:[o.jsx(g,{value:B.get(r)??B.get(null),expandable:!1,expanded:!0,variant:"h3",subheader:p}),u&&o.jsxs("span",{className:"font-Inter-Medium font-bold text-sm",children:["Version: ",u]}),o.jsx(S,{values:x,kind:i.BINDING}),o.jsx(X,{source:y,displayMode:e,initialLevel:1})]})};v.__docgenInfo={description:"",methods:[],displayName:"BindingsNodeViewer",props:{node:{required:!0,tsType:{name:"ITreeNode",elements:[{name:"union",raw:"AsyncApiTreeNodeValue<K> | null",elements:[{name:"unknown"},{name:"null"}]},{name:"AsyncApiTreeNodeKinds.BINDINGS"},{name:"Partial",elements:[{name:"signature",type:"object",raw:`{
  readonly brokenRef?: string
  readonly _fragment: unknown
}`,signature:{properties:[{key:"brokenRef",value:{name:"string",required:!1}},{key:"_fragment",value:{name:"unknown",required:!0}}]}}],raw:`Partial<{
  readonly brokenRef?: string
  readonly _fragment: unknown
}>`}],raw:"ITreeNode<AsyncApiTreeNodeValue<K> | null, K, AsyncApiNodeMeta>"},description:""},relatedTo:{required:!0,tsType:{name:"AsyncApiTreeNodeKinds[union]",raw:"typeof AsyncApiTreeNodeKinds[keyof typeof AsyncApiTreeNodeKinds]"},description:""}}};const ee=t=>{const{node:n}=t,r=pe(),e=T(),s=n.value(),a=m.useMemo(()=>`Channel ${(s==null?void 0:s.title)??n.key.toString()??""}`.trim(),[s,n]),l=m.useMemo(()=>(s==null?void 0:s.extensions)??{},[s==null?void 0:s.extensions]);return o.jsxs("div",{className:"flex flex-col gap-1",children:[o.jsx(g,{value:a,expandable:!1,expanded:!0,variant:"h2"}),o.jsx(j,{value:(s==null?void 0:s.description)??"",layoutMode:e,level:r}),o.jsx(S,{values:l,kind:i.CHANNEL})]})};ee.__docgenInfo={description:"",methods:[],displayName:"ChannelNodeViewer",props:{node:{required:!0,tsType:{name:"ITreeNode",elements:[{name:"union",raw:"AsyncApiTreeNodeValue<K> | null",elements:[{name:"unknown"},{name:"null"}]},{name:"AsyncApiTreeNodeKinds.CHANNEL"},{name:"Partial",elements:[{name:"signature",type:"object",raw:`{
  readonly brokenRef?: string
  readonly _fragment: unknown
}`,signature:{properties:[{key:"brokenRef",value:{name:"string",required:!1}},{key:"_fragment",value:{name:"unknown",required:!0}}]}}],raw:`Partial<{
  readonly brokenRef?: string
  readonly _fragment: unknown
}>`}],raw:"ITreeNode<AsyncApiTreeNodeValue<K> | null, K, AsyncApiNodeMeta>"},description:""}}};const ne=t=>{var y,p;const{node:n}=t,r=W(),e=n.value(),s=(e==null?void 0:e.description)??"",a=n.childrenNodes(),l=a.find(z),d=a.find(ve),c=a.find(De),u=m.useMemo(()=>(e==null?void 0:e.extensions)??{},[e==null?void 0:e.extensions]);return o.jsxs("div",{className:"flex flex-col gap-3",children:[s&&o.jsx(j,{value:s,level:0}),o.jsx(S,{values:u,kind:i.MESSAGE}),l&&o.jsx(v,{node:l,relatedTo:i.MESSAGE}),d&&o.jsxs("div",{className:"flex flex-col gap-1",children:[o.jsx(g,{value:"Headers",variant:"h3",expandable:!1}),o.jsx(K,{schema:(y=d.value())==null?void 0:y.schema,displayMode:r})]}),c&&o.jsxs("div",{className:"flex flex-col gap-1",children:[o.jsx(g,{value:"Payload",variant:"h3",expandable:!1}),o.jsx(K,{schema:(p=c.value())==null?void 0:p.schema,displayMode:r})]})]})};ne.__docgenInfo={description:"",methods:[],displayName:"MessageNodeViewer",props:{node:{required:!0,tsType:{name:"ITreeNode",elements:[{name:"union",raw:"AsyncApiTreeNodeValue<K> | null",elements:[{name:"unknown"},{name:"null"}]},{name:"AsyncApiTreeNodeKinds.MESSAGE"},{name:"Partial",elements:[{name:"signature",type:"object",raw:`{
  readonly brokenRef?: string
  readonly _fragment: unknown
}`,signature:{properties:[{key:"brokenRef",value:{name:"string",required:!1}},{key:"_fragment",value:{name:"unknown",required:!0}}]}}],raw:`Partial<{
  readonly brokenRef?: string
  readonly _fragment: unknown
}>`}],raw:"ITreeNode<AsyncApiTreeNodeValue<K> | null, K, AsyncApiNodeMeta>"},description:""}}};const re=t=>{const{options:n,selectedOption:r,onSelectOption:e}=t;return n.length===0?null:o.jsx("div",{children:n.map(s=>{const a=s.value();return a?o.jsx("button",{className:`button-selector-option ${r===s?"selected":""}`,onClick:l=>{l.preventDefault(),l.stopPropagation(),e(s)},children:a.title??a.internalTitle??"unknown"},s.id):null})})};re.__docgenInfo={description:"",methods:[],displayName:"MessageSelector",props:{options:{required:!0,tsType:{name:"Array",elements:[{name:"ITreeNode",elements:[{name:"union",raw:"AsyncApiTreeNodeValue<K> | null",elements:[{name:"unknown"},{name:"null"}]},{name:"AsyncApiTreeNodeKinds.MESSAGE"},{name:"Partial",elements:[{name:"signature",type:"object",raw:`{
  readonly brokenRef?: string
  readonly _fragment: unknown
}`,signature:{properties:[{key:"brokenRef",value:{name:"string",required:!1}},{key:"_fragment",value:{name:"unknown",required:!0}}]}}],raw:`Partial<{
  readonly brokenRef?: string
  readonly _fragment: unknown
}>`}],raw:"ITreeNode<AsyncApiTreeNodeValue<K> | null, K, AsyncApiNodeMeta>"}],raw:"AsyncApiTreeNode<typeof AsyncApiTreeNodeKinds.MESSAGE>[]"},description:""},selectedOption:{required:!0,tsType:{name:"union",raw:"AsyncApiTreeNode<typeof AsyncApiTreeNodeKinds.MESSAGE> | null",elements:[{name:"ITreeNode",elements:[{name:"union",raw:"AsyncApiTreeNodeValue<K> | null",elements:[{name:"unknown"},{name:"null"}]},{name:"AsyncApiTreeNodeKinds.MESSAGE"},{name:"Partial",elements:[{name:"signature",type:"object",raw:`{
  readonly brokenRef?: string
  readonly _fragment: unknown
}`,signature:{properties:[{key:"brokenRef",value:{name:"string",required:!1}},{key:"_fragment",value:{name:"unknown",required:!0}}]}}],raw:`Partial<{
  readonly brokenRef?: string
  readonly _fragment: unknown
}>`}],raw:"ITreeNode<AsyncApiTreeNodeValue<K> | null, K, AsyncApiNodeMeta>"},{name:"null"}]},description:""},onSelectOption:{required:!0,tsType:{name:"signature",type:"function",raw:"(option: AsyncApiTreeNode<typeof AsyncApiTreeNodeKinds.MESSAGE>) => void",signature:{arguments:[{type:{name:"ITreeNode",elements:[{name:"union",raw:"AsyncApiTreeNodeValue<K> | null",elements:[{name:"unknown"},{name:"null"}]},{name:"AsyncApiTreeNodeKinds.MESSAGE"},{name:"Partial",elements:[{name:"signature",type:"object",raw:`{
  readonly brokenRef?: string
  readonly _fragment: unknown
}`,signature:{properties:[{key:"brokenRef",value:{name:"string",required:!1}},{key:"_fragment",value:{name:"unknown",required:!0}}]}}],raw:`Partial<{
  readonly brokenRef?: string
  readonly _fragment: unknown
}>`}],raw:"ITreeNode<AsyncApiTreeNodeValue<K> | null, K, AsyncApiNodeMeta>"},name:"option"}],return:{name:"void"}}},description:""}}};const te=t=>{const{node:n}=t,[r,e]=m.useState(null),a=n.nestedNodes().filter(je);m.useEffect(()=>{a.length>0&&r===null&&e(a[0])},[a,r]);const l=m.useCallback(d=>o.jsx(re,{options:a,selectedOption:r,onSelectOption:e}),[a,r]);return o.jsxs("div",{children:[o.jsx(g,{value:"Messages",expandable:!1,expanded:!0,variant:"h2",subheader:l}),r&&o.jsx(ne,{node:r})]})};te.__docgenInfo={description:"",methods:[],displayName:"MessagesNodeViewer",props:{node:{required:!0,tsType:{name:"ITreeNode",elements:[{name:"union",raw:"AsyncApiTreeNodeValue<K> | null",elements:[{name:"unknown"},{name:"null"}]},{name:"AsyncApiTreeNodeKinds.MESSAGES"},{name:"Partial",elements:[{name:"signature",type:"object",raw:`{
  readonly brokenRef?: string
  readonly _fragment: unknown
}`,signature:{properties:[{key:"brokenRef",value:{name:"string",required:!1}},{key:"_fragment",value:{name:"unknown",required:!0}}]}}],raw:`Partial<{
  readonly brokenRef?: string
  readonly _fragment: unknown
}>`}],raw:"ITreeNode<AsyncApiTreeNodeValue<K> | null, K, AsyncApiNodeMeta>"},description:""}}};const se=t=>{const{node:n}=t,r=T(),e=n.value(),s=m.useMemo(()=>Oe(i.OPERATION,n.childrenNodes()),[n]),a=m.useMemo(()=>(e==null?void 0:e.extensions)??{},[e==null?void 0:e.extensions]);return o.jsxs("div",{className:"flex flex-col gap-1",children:[o.jsx(g,{value:(e==null?void 0:e.title)??n.key.toString()??"No title",expandable:!1,variant:"h1"}),o.jsx(Q,{action:(e==null?void 0:e.action)??"",address:(e==null?void 0:e.address)??""}),o.jsx(j,{value:(e==null?void 0:e.description)??"",layoutMode:r}),o.jsx(S,{values:a,kind:i.OPERATION}),o.jsx(Be,{children:s})]})},Be=t=>{const{children:n}=t;return o.jsx("div",{className:"flex flex-col gap-5",children:n.map(r=>z(r)?o.jsx(v,{node:r,relatedTo:i.OPERATION},r.key):Re(r)?o.jsx(ee,{node:r},r.key):Ce(r)?o.jsx(te,{node:r},r.key):null)})};se.__docgenInfo={description:"",methods:[],displayName:"OperationNodeViewer",props:{node:{required:!0,tsType:{name:"ITreeNode",elements:[{name:"union",raw:"AsyncApiTreeNodeValue<K> | null",elements:[{name:"unknown"},{name:"null"}]},{name:"AsyncApiTreeNodeKinds.OPERATION"},{name:"Partial",elements:[{name:"signature",type:"object",raw:`{
  readonly brokenRef?: string
  readonly _fragment: unknown
}`,signature:{properties:[{key:"brokenRef",value:{name:"string",required:!1}},{key:"_fragment",value:{name:"unknown",required:!0}}]}}],raw:`Partial<{
  readonly brokenRef?: string
  readonly _fragment: unknown
}>`}],raw:"ITreeNode<AsyncApiTreeNodeValue<K> | null, K, AsyncApiNodeMeta>"},description:""}}};const oe=m.memo(t=>o.jsx(me,{fallback:o.jsx(ye,{componentName:"Async API Operation Viewer"}),children:o.jsx(Ge,{...t})})),Ge=m.memo(t=>{const{source:n,operationType:r,operationName:e,displayMode:s=xe}=t,l=new C(n).build();console.debug("[AsyncAPI] Source:",n),console.debug("[AsyncAPI] Tree:",l);const d=l.root;if(!d)return null;const u=d.childrenNodes().find(y=>{if(!Pe(y))return!1;const p=y.value();return y.key===e&&(p==null?void 0:p.action)===r});return u?o.jsx(Ae.Provider,{value:s,children:o.jsxs(fe.Provider,{value:Ne,children:[" ",o.jsx(ge.Provider,{value:0,children:o.jsx(se,{node:u})})]})}):null});oe.__docgenInfo={description:"",methods:[],displayName:"AsyncApiOperationViewer",props:{source:{required:!0,tsType:{name:"unknown"},description:""},operationType:{required:!1,tsType:{name:"string"},description:""},operationName:{required:!1,tsType:{name:"string"},description:""},displayMode:{required:!1,tsType:{name:"union",raw:`| typeof SIMPLE_DISPLAY_MODE
| typeof DETAILED_DISPLAY_MODE`,elements:[{name:"SIMPLE_DISPLAY_MODE"},{name:"DETAILED_DISPLAY_MODE"}]},description:""}}};const Qe={title:"Async Api Viewer",component:oe,parameters:{},argTypes:{source:{control:"object"}},args:{source:{}}},_={args:{source:{}}},qe={asyncapi:"3.0.0",info:{title:"example-event-service",version:"1.0.0","x-generator":"springwolf"},defaultContentType:"application/json",servers:{"kafka-main":{host:"kafka-host",protocol:"kafka"}},channels:{"customer-change-topic":{address:"customer-change-topic",description:"Channel for customer change notifications",messages:{BaseEventMessage:{$ref:"#/components/messages/BaseEventMessage"}},servers:[{$ref:"#/servers/kafka-main"}],bindings:{},"x-string-extension":"value","x-integer-extension":1,"x-boolean-extension":!0,"x-number-extension":1,"x-array-extension":[1,2,3],"x-object-extension":{key:"value"}}},operations:{"customer-change-topic_send_BaseEvent":{action:"send",channel:{$ref:"#/channels/customer-change-topic"},title:"Customer change topic send",description:"Send events about Customer's data changes",bindings:{kafka:{bindingVersion:"0.5.0"}},messages:[{$ref:"#/channels/customer-change-topic/messages/BaseEventMessage"}],"x-string-extension":"value","x-integer-extension":1,"x-boolean-extension":!0,"x-number-extension":1,"x-array-extension":[1,2,3],"x-object-extension":{key:"value"}}},components:{schemas:{HeadersExample:{title:"HeadersExample",type:"object",properties:{"X-Idempotency-Key":{type:"string"}},examples:[{"X-Idempotency-Key":"string"}]},BaseEvent:{title:"BaseEvent",type:"object",properties:{currentInstance:{type:"object",description:"New data state"},currentModelVersion:{type:"integer",description:"Model Version",format:"int32"},previousInstance:{type:"object",description:"Previous data state"},resourceAction:{type:"string",description:"Resource Action"},resourceType:{type:"string",description:"Resource Type"}},description:"Base event to describe Customer's data changes",examples:[{currentInstance:{},currentModelVersion:0,previousInstance:{},resourceAction:"string",resourceType:"string"}],required:["currentInstance","currentModelVersion","previousInstance","resourceAction","resourceType"]}},messages:{BaseEventMessage:{headers:{$ref:"#/components/schemas/HeadersExample"},payload:{$ref:"#/components/schemas/BaseEvent"},description:"Base event to describe Customer's data changes",name:"BaseEventMessage",title:"BaseEvent",bindings:{kafka:{bindingVersion:"0.5.0",num:123,str:"string",bool:!0,arr:[1,2,3],obj:{key:"value"},sch:{type:"object",properties:{aaa:{type:"string",description:"AAA",minLength:1,maxLength:10},bbb:{type:"integer",description:"BBB",minimum:1,maximum:100},ccc:{type:"boolean",description:"CCC",default:!0},combinerSch:{oneOf:[{type:"string",description:"String",minLength:1,maxLength:10},{type:"number",description:"Number",minimum:1,maximum:100},{type:"boolean",description:"Boolean",default:!0}]}}},nestedObj:{obj:{aaa:1234,bbb:!0,empty:null,arr:[1,2,3],sch:{type:"array",items:{type:"string",description:"Array item",minLength:1,maxLength:10}},combinerSch:{oneOf:[{type:"string",description:"String",minLength:1,maxLength:10},{type:"object",properties:{aaa:{type:"string",description:"AAA",minLength:1,maxLength:10}}}]}}},"x-string-extension":"value","x-integer-extension":1,"x-boolean-extension":!0,"x-number-extension":1,"x-array-extension":[1,2,3],"x-object-extension":{key:"value"}}},"x-string-extension":"value","x-integer-extension":1,"x-boolean-extension":!0,"x-number-extension":1,"x-array-extension":[1,2,3],"x-object-extension":{key:"value"}}}}},M={args:{source:Se({source:qe}),operationName:"customer-change-topic_send_BaseEvent",operationType:"send"}};var G,q,H;_.parameters={..._.parameters,docs:{...(G=_.parameters)==null?void 0:G.docs,source:{originalSource:`{
  args: {
    source: {}
  }
}`,...(H=(q=_.parameters)==null?void 0:q.docs)==null?void 0:H.source}}};var Y,F,$;M.parameters={...M.parameters,docs:{...(Y=M.parameters)==null?void 0:Y.docs,source:{originalSource:`{
  args: {
    source: prepareAsyncApiDocument({
      source: KAFKA_E2E_SOURCE
    }),
    operationName: 'customer-change-topic_send_BaseEvent',
    operationType: 'send'
  }
}`,...($=(F=M.parameters)==null?void 0:F.docs)==null?void 0:$.source}}};const Ze=["Test","KafkaE2E"];export{M as KafkaE2E,_ as Test,Ze as __namedExportsOrder,Qe as default};
