import{j as e}from"./_commonjs-dynamic-modules-6308e768.js";import{J as y,i as u,e as E,C as M,D as _,L as T,a as L,b as S,f as I,d as h}from"./NestingIndicatorTitleRow-5a23a188.js";import{i as O,g as v,E as x,e as P,f as g}from"./constants-2b09506c.js";import{j as w,b as A,T as b,J as j,a as C}from"./JsonPropNodeViewer-647b1f6f.js";import{J as F}from"./model-26badf15.js";import{r as m}from"./index-f46741a2.js";const J=2,Y=(r,a,t=J)=>{const s=new F(r,a);if(!O(r))return s;const i={parent:null,alreadyConvertedMappingStack:new Map,nodeIdPrefix:"#",treeLevel:0,maxTreeLevel:t};return v(r,A(s,r),{state:i,rules:w()}),s},N=r=>e.jsx(x,{fallback:e.jsx(P,{componentName:"JSON Schema Diff Viewer"}),children:e.jsx(U,{...r})}),U=r=>{const{schema:a,expandedDepth:t=S,displayMode:s=I,layoutMode:i=h,filters:f=[],overriddenKind:D,metaKeys:o,topLevelPropsMediaTypes:c}=r;g(a,o.diffsMetaKey,o.aggregatedDiffsMetaKey);const d=m.useMemo(()=>Y(a,o),[o,a]),p=m.useMemo(()=>new y(d,t),[t,d]);console.debug("Schema:",a),console.debug("Tree Model:",d),console.debug("State Model:",p);const n=p.root;let l=null;return u(n)&&(l=e.jsx(j,{state:n,overriddenKind:D})),E(n)&&(l=e.jsx(C,{state:n,onGlobalSelectNestedNode:()=>null})),e.jsx(b.Provider,{value:c,children:e.jsx(M.Provider,{value:f,children:e.jsx(_.Provider,{value:s,children:e.jsx(T.Provider,{value:i,children:e.jsx(L.Provider,{value:0,children:l})})})})})};N.__docgenInfo={description:"",methods:[],displayName:"JsonSchemaDiffViewer",props:{schema:{required:!0,tsType:{name:"unknown"},description:""},expandedDepth:{required:!1,tsType:{name:"number"},description:""},displayMode:{required:!1,tsType:{name:"union",raw:`| typeof SIMPLE_DISPLAY_MODE
| typeof DETAILED_DISPLAY_MODE`,elements:[{name:"SIMPLE_DISPLAY_MODE"},{name:"DETAILED_DISPLAY_MODE"}]},description:""},layoutMode:{required:!1,tsType:{name:"union",raw:`| typeof DOCUMENT_LAYOUT_MODE
| typeof INLINE_DIFFS_LAYOUT_MODE
| typeof SIDE_BY_SIDE_DIFFS_LAYOUT_MODE`,elements:[{name:"DOCUMENT_LAYOUT_MODE"},{name:"INLINE_DIFFS_LAYOUT_MODE"},{name:"SIDE_BY_SIDE_DIFFS_LAYOUT_MODE"}]},description:""},filters:{required:!1,tsType:{name:"ReadonlyArray",elements:[{name:"DiffType"}],raw:"ReadonlyArray<DiffType>"},description:""},metaKeys:{required:!0,tsType:{name:"signature",type:"object",raw:`{
  diffsMetaKey: symbol;
  aggregatedDiffsMetaKey: symbol;
}`,signature:{properties:[{key:"diffsMetaKey",value:{name:"symbol",required:!0}},{key:"aggregatedDiffsMetaKey",value:{name:"symbol",required:!0}}]}},description:""},overriddenKind:{required:!1,tsType:{name:"literal",value:"'parameters'"},description:""},topLevelPropsMediaTypes:{required:!1,tsType:{name:"Record",elements:[{name:"string"},{name:"string"}],raw:"Record<ParameterKey, MediaType>"},description:""}}};export{N as J};
