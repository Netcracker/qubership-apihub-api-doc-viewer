var _e=Object.defineProperty;var Ee=(n,e,t)=>e in n?_e(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t;var f=(n,e,t)=>(Ee(n,typeof e!="symbol"?e+"":e,t),t);import{j as a}from"./_commonjs-dynamic-modules-6308e768.js";import{b8 as Te,b9 as Se,ba as ge,bb as Oe,bc as he,bd as Pe,be as Re,bf as Me,bg as xe,bh as we,bi as be,bj as Ie,bk as ke,bl as Ce,bm as ve,bn as Le,bo as je,bp as De,bq as Ye,br as Ve,bs as He,bt as Ke,bu as Je,bv as Be,bw as qe,bx as Ge,by as Ue,bz as Fe,bA as $e,bB as Xe,bC as ze,bD as We,bE as Qe,bF as Ze,bG as en,bH as nn,bI as tn,bJ as rn,bK as sn,bL as on,bM as an,bN as dn,bO as re,r as ln,K as G,H as cn,Z as g,I as se,S as k,bP as un,bQ as pn,Y as C,ad as mn,ac as U,bR as yn,bS as Nn,h as J,bT as B,E as An,e as fn,g as _n,L as En,q as Tn,p as Sn}from"./NestingIndicatorTitleRow-c44a154d.js";import{r as y}from"./index-f46741a2.js";import{J as F}from"./JsonSchemaViewer-f15987fd.js";import{e as gn}from"./preprocess-47f36ff4.js";import"./index-415bee12.js";import"./JsonPropNodeViewer-08ba04b7.js";const R={SIMPLE:"simple",COMPLEX:"complex"};class v{constructor(e="#",t="",r,s,o){f(this,"type");f(this,"parent");f(this,"container");f(this,"newDataLevel");f(this,"_value");f(this,"_meta");f(this,"_childrenNodes",[]);f(this,"_nestedNodes",[]);this.id=e,this.key=t,this.kind=r,this.isCycle=s;const{type:i=R.SIMPLE,value:d=null,parent:u=null,container:p=null,newDataLevel:c=!0,meta:N}=o;this.type=i,this.parent=u,this.container=p,this.newDataLevel=c,this._value=d,this._meta=N}createCycledClone(e,t,r){const s=new v(e,t,this.kind,!0,{type:this.type,parent:r,container:null,newDataLevel:this.newDataLevel,value:this._value!==null?{...this._value}:null,meta:{...this._meta}});return s.setChildrenNodes(this._childrenNodes),s.setNestedNodes(this._nestedNodes),s}value(e){return e?null:this._value}meta(){return this._meta}childrenNodes(e){return e?[]:this._childrenNodes}setChildrenNodes(e){this._childrenNodes.length=0,this._childrenNodes.push(...e)}nestedNodes(){return this._nestedNodes}setNestedNodes(e){this._nestedNodes.length=0,this._nestedNodes.push(...e)}findNestedNode(e,t=!1){if(!e&&this._nestedNodes.length)return this._nestedNodes[0];for(const r of this._nestedNodes){if(r.id===e)return r;if(t&&r instanceof L){const s=r.findNestedNode(e,t);if(s)return s}}return null}addChildNode(e){this._childrenNodes.push(e)}addNestedNode(e){this._nestedNodes.push(e)}}class L extends v{constructor(t="#",r="",s,o,i){super(t,r,s,o,i);f(this,"type");this.id=t,this.key=r,this.kind=s,this.type=i.type}createCycledClone(t,r,s){const o=new L(t,r,this.kind,!0,{type:this.type,parent:s,container:null,newDataLevel:this.newDataLevel,value:this._value!==null?{...this._value}:null,meta:{...this._meta}});return o.setChildrenNodes(this._childrenNodes),o.setNestedNodes(this._nestedNodes),o}value(t){const r=this.findNestedNode(t,!0);return(r==null?void 0:r.value())??null}childrenNodes(t){const r=this.findNestedNode(t,!0);return(r==null?void 0:r.childrenNodes())??[]}}class On{constructor(){f(this,"nodes",new Map)}get root(){return this.nodes.get("#")??null}createSimpleNode(e,t,r,s,o){const i=new v(e,t,r,s,o);return this.nodes.set(e,i),i}createComplexNode(e,t,r,s,o){const i=new L(e,t,r,s,o);return this.nodes.set(e,i),i}createCycledClone(e,t,r,s){const o=e.createCycledClone(t,r,s);return this.nodes.set(t,o),o}}class hn extends On{constructor(){super()}}const l={ROOT:"root",OPERATION:"operation",BINDINGS:"bindings",BINDING:"binding",JSO_PROPERTY:"jsoProperty",CHANNEL:"channel",MESSAGES:"messages",MESSAGE:"message"},Pn=Object.values(l),E={STRING:"string",NUMBER:"number",BOOLEAN:"boolean",OBJECT:"object",ARRAY:"array",JSON_SCHEMA:"jsonSchema",MULTI_SCHEMA:"multiSchema",UNKNOWN:"unknown"},Rn=Object.values(E);function T(n){return typeof n=="object"&&n!==null&&!Array.isArray(n)}function j(n){return Array.isArray(n)}function Mn(n){return typeof n=="string"}class xn{constructor(){f(this,"tree",null)}pick(e,t){if(!T(e))return null;const r={};for(const s of t){const o=String(s);if(!(o in e))continue;const i=e[o];Array.isArray(i)?r[o]=[...i]:T(i)?r[o]={...i}:r[o]=i}return this.isPartialOf(r,t)?r:null}isPartialOf(e,t){return Object.keys(e).every(r=>t.includes(r))}}const oe="<address unknown>",wn=(n,e)=>!T(e)||j(e)||e.address?e:{...e,address:oe},bn=(n,e)=>!T(e)||j(e)?e:{...e,protocol:typeof n=="symbol"?n.toString():`${n}`},D=(n,e)=>{const t=$(e),r=In(t);return{title:typeof n=="symbol"?n.toString():`${n}`,value:e,valueType:$(e),isPrimitive:r}};function In(n){return n!==E.JSON_SCHEMA&&n!==E.MULTI_SCHEMA&&n!==E.OBJECT}function $(n){return typeof n=="string"?E.STRING:typeof n=="number"?E.NUMBER:typeof n=="boolean"?E.BOOLEAN:typeof n=="object"&&n!==null?Array.isArray(n)?E.ARRAY:kn(n)?E.JSON_SCHEMA:Cn(n)?E.MULTI_SCHEMA:E.OBJECT:E.UNKNOWN}function kn(n){if(typeof n!="object"||n===null)return!1;const e="type"in n&&typeof n.type=="string"&&Te.some(r=>r===n.type),t=new Set([Se,ge,Oe,he,Pe,Re,Me,xe,we,be,Ie,ke,Ce,ve,Le,je,De,Ye,Ve,He,Ke,Je,Be,qe,Ge,Ue,Fe,$e,Xe,ze,We,Qe,Ze,en,nn,tn,rn,sn,on,an,dn,re]);return e&&Object.keys(n).every(r=>t.has(r))}function Cn(n){return typeof n!="object"||n===null?!1:!!("schemaFormat"in n&&typeof n.schemaFormat=="string"&&"schema"in n&&T(n.schema))}const vn=(n,e)=>!T(e)||j(e)?e:T(e.channel)?{...e,address:e.channel.address?e.channel.address:oe}:e,Ln=(n,e)=>{if(!T(e)||j(e))return e;const{name:t,...r}=e;return{...r,...t?{internalTitle:t}:{}}};function I(n=l.ROOT){return{"/operations":{"/*":()=>({...I(l.OPERATION),transformers:[vn]})},"/channel":()=>({...I(l.CHANNEL),"/messages":{kind:void 0},transformers:[wn]}),"/bindings":{"/*":{"/protocol":{kind:void 0,transformers:[]},"/**":()=>({kind:l.JSO_PROPERTY,transformers:[D]}),kind:l.BINDING,transformers:[bn]},kind:l.BINDINGS,complex:!0},"/messages":{"/*":()=>({...I(l.MESSAGE),transformers:[Ln]}),kind:l.MESSAGES,complex:!0},"/headers":{kind:l.JSO_PROPERTY,transformers:[D]},"/payload":{kind:l.JSO_PROPERTY,transformers:[D]},kind:n}}const _=class _ extends xn{constructor(t){super();f(this,"tree");this.source=t,this.tree=new hn}static getAsyncApiTreeNodeValueProps(t){switch(t){case l.ROOT:return _.ASYNC_API_TREE_NODE_VALUE_COMMON_PROPS;case l.OPERATION:return[..._.ASYNC_API_TREE_NODE_VALUE_COMMON_PROPS,"action","address"];case l.BINDING:return[..._.ASYNC_API_TREE_NODE_VALUE_COMMON_PROPS,"protocol"];case l.JSO_PROPERTY:return[..._.ASYNC_API_TREE_NODE_VALUE_COMMON_PROPS,"value","valueType"];case l.CHANNEL:return _.ASYNC_API_TREE_NODE_VALUE_COMMON_PROPS;case l.MESSAGE:return[..._.ASYNC_API_TREE_NODE_VALUE_COMMON_PROPS,"internalTitle"];default:return[]}}build(){if(!T(this.source))return this.tree;const t={parent:null,container:null,alreadyConvertedValuesCache:new Map},r=I();return ln(this.source,[this.instantiateHookPreventingTreeBuildingProcessFromInfiniteLoop(),this.instantiateHookUnifyingValue(this.source),this.instantiateHookCreatingAsyncApiTreeNodes()],{state:t,rules:r}),this.tree}instantiateHookPreventingTreeBuildingProcessFromInfiniteLoop(){return({value:t,state:r,key:s,path:o})=>{if(typeof s=="symbol")return;const{alreadyConvertedValuesCache:i,parent:d,container:u}=r,p=i.get(t);if(!p||!this.isAsyncApiSimpleTreeNode(p)&&!this.isAsyncApiComplexTreeNode(p))return{value:t};if(!d||!this.isAsyncApiSimpleTreeNode(d))return{value:t};const c="#"+G(o),N=this.tree.createCycledClone(p,c,s,d);return u&&u.addNestedNode(N),d&&d.addChildNode(N),{done:!0}}}instantiateHookUnifyingValue(t){return({key:r,value:s,path:o,state:i,rules:d})=>!d||!Array.isArray(d.transformers)?void 0:{value:(d.transformers??[]).reduce((c,N)=>N(r,c,t,o,i),s)}}instantiateHookCreatingAsyncApiTreeNodes(){return({key:t,value:r,path:s,rules:o,state:i})=>{if(!o)return{done:!0};if(typeof t=="symbol")return{done:!0};if(r==null||!T(r)&&!cn(r))return{done:!0};if(!o.kind||!Pn.includes(o.kind))return;const{parent:d,container:u}=i,p="#"+G(s),{kind:c,complex:N=!1}=o,A=u?{value:Array.isArray(r)?null:r,newDataLevel:!0,container:u,parent:u.parent}:{value:Array.isArray(r)?null:r,newDataLevel:!0,container:null,parent:d},m=this.createNodeFromRaw(p,t,c,N,A);if(!m)return;if(u?u.addNestedNode(m):d&&d.addChildNode(m),T(r)&&r.isPrimitive)return{done:!0};const S=new Map(i.alreadyConvertedValuesCache);S.set(r,m);let P;return this.isAsyncApiSimpleTreeNode(m)&&(P={parent:m,container:null,alreadyConvertedValuesCache:S}),this.isAsyncApiComplexTreeNode(m)&&(P={parent:d,container:m,alreadyConvertedValuesCache:S}),{value:r,state:P}}}createNodeFromRaw(t,r,s,o,i){const{parent:d,container:u,newDataLevel:p}=i;if(o){const m=this.createNodeMeta(r,i),S={type:R.COMPLEX,parent:d&&this.isAsyncApiSimpleTreeNode(d)?d:null,container:u&&this.isAsyncApiComplexTreeNode(u)?u:null,value:null,meta:m,newDataLevel:p};return this.tree.createComplexNode(t,r,s,!1,S)}const c=this.createNodeValue(r,s,{...i,parent:d,container:u}),N=this.createNodeMeta(r,i),A={type:R.SIMPLE,parent:d&&this.isAsyncApiSimpleTreeNode(d)?d:null,container:u&&this.isAsyncApiComplexTreeNode(u)?u:null,value:c,meta:N,newDataLevel:p};return this.tree.createSimpleNode(t,r,s,!1,A)}createNodeMeta(t,r){const{value:s,parent:o=null}=r;return{...this.isValueWithBrokenRef(s)?{brokenRef:`${s.$ref}`}:{},_fragment:s}}createNodeValue(t,r,s){const{value:o}=s;if(o==null||!T(o))return null;switch(r){case l.OPERATION:return this.pick(o,_.getAsyncApiTreeNodeValueProps(r));case l.BINDING:return this.pick(o,_.getAsyncApiTreeNodeValueProps(r));case l.JSO_PROPERTY:return this.pick(o,_.getAsyncApiTreeNodeValueProps(r));case l.CHANNEL:return this.pick(o,_.getAsyncApiTreeNodeValueProps(r));case l.MESSAGE:return this.pick(o,_.getAsyncApiTreeNodeValueProps(r));default:return null}}isAsyncApiNodeType(t){return!t||!Mn(t)?!1:Rn.some(r=>r===t)}isAsyncApiSimpleTreeNode(t){return t.type===R.SIMPLE}isAsyncApiComplexTreeNode(t){return!this.isAsyncApiSimpleTreeNode(t)}isValueWithBrokenRef(t){return T(t)&&re in t}getNodeComplexityType(t){return R.SIMPLE}};f(_,"ASYNC_API_TREE_NODE_META_PROPS",[]),f(_,"ASYNC_API_TREE_NODE_VALUE_COMMON_PROPS",["title","description","summary"]);let K=_;const X={[l.BINDINGS]:1,[l.CHANNEL]:2,[l.MESSAGES]:3};function jn(n,e){switch(n){case l.OPERATION:return e.sort((t,r)=>{const s=X[t.kind]??0,o=X[r.kind]??0;return s-o});default:return e}}function Dn(n){return n.kind===l.OPERATION}function Yn(n){return n.kind===l.CHANNEL}function Vn(n){return n.kind===l.MESSAGES}function Hn(n){return n.kind===l.MESSAGE}function Kn(n){return n.kind===l.JSO_PROPERTY&&n.key==="headers"}function Jn(n){return n.kind===l.JSO_PROPERTY&&n.key==="payload"}function ae(n){return n.kind===l.BINDINGS}function Bn(n){return n.kind===l.BINDING}function ie(n){return n.kind===l.JSO_PROPERTY}const de=n=>{const e=g();return e===se?a.jsxs("div",{style:{fontSize:12,marginTop:4,marginBottom:4},children:["This layout mode (",e,") is not supported."]}):a.jsx(qn,{...n})},qn=n=>g()===k?a.jsxs("div",{className:"flex flex-row",children:[a.jsx(Y,{...n}),a.jsx(Y,{...n})]}):a.jsx("div",{className:"flex flex-row",children:a.jsx(Y,{...n})}),Gn={send:"bg-blue-500",receive:"bg-green-500"},Y=n=>{const{action:e,address:t}=n,o=g()===k?"w-1/2":"w-full";return a.jsx("div",{className:`font-Inter-Medium text-base ${o} my-2`,children:a.jsxs("div",{className:"flex flex-row items-center w-max p-3 bg-slate-100 rounded-md gap-3",children:[a.jsx("div",{className:`font-bold px-2 py-1 ${Gn[e]} text-white rounded-md`,children:e.toUpperCase()}),a.jsx("div",{className:"text-slate-500",children:t})]})})};de.__docgenInfo={description:"",methods:[],displayName:"AddressRow",props:{action:{required:!0,tsType:{name:"string"},description:""},address:{required:!0,tsType:{name:"string"},description:""}}};const le=n=>{const{options:e,selectedOption:t,onSelectOption:r}=n;return e.length===0?null:a.jsx("div",{children:e.map(s=>{const o=s.value();return o?a.jsx("button",{className:`button-selector-option ${t===s?"selected":""}`,onClick:i=>{i.preventDefault(),i.stopPropagation(),r(s)},children:o.protocol},s.id):null})})};le.__docgenInfo={description:"",methods:[],displayName:"BindingSelector",props:{options:{required:!0,tsType:{name:"Array",elements:[{name:"ITreeNode",elements:[{name:"union",raw:"AsyncApiTreeNodeValue<K> | null",elements:[{name:"unknown"},{name:"null"}]},{name:"AsyncApiTreeNodeKinds.BINDING"},{name:"Partial",elements:[{name:"signature",type:"object",raw:`{
  readonly brokenRef?: string
  readonly _fragment: unknown
}`,signature:{properties:[{key:"brokenRef",value:{name:"string",required:!1}},{key:"_fragment",value:{name:"unknown",required:!0}}]}}],raw:`Partial<{
  readonly brokenRef?: string
  readonly _fragment: unknown
}>`}],raw:"ITreeNode<AsyncApiTreeNodeValue<K> | null, K, AsyncApiNodeMeta>"}],raw:"AsyncApiTreeNode<typeof AsyncApiTreeNodeKinds.BINDING>[]"},description:""},selectedOption:{required:!0,tsType:{name:"union",raw:"AsyncApiTreeNode<typeof AsyncApiTreeNodeKinds.BINDING> | null",elements:[{name:"ITreeNode",elements:[{name:"union",raw:"AsyncApiTreeNodeValue<K> | null",elements:[{name:"unknown"},{name:"null"}]},{name:"AsyncApiTreeNodeKinds.BINDING"},{name:"Partial",elements:[{name:"signature",type:"object",raw:`{
  readonly brokenRef?: string
  readonly _fragment: unknown
}`,signature:{properties:[{key:"brokenRef",value:{name:"string",required:!1}},{key:"_fragment",value:{name:"unknown",required:!0}}]}}],raw:`Partial<{
  readonly brokenRef?: string
  readonly _fragment: unknown
}>`}],raw:"ITreeNode<AsyncApiTreeNodeValue<K> | null, K, AsyncApiNodeMeta>"},{name:"null"}]},description:""},onSelectOption:{required:!0,tsType:{name:"signature",type:"function",raw:"(option: AsyncApiTreeNode<typeof AsyncApiTreeNodeKinds.BINDING>) => void",signature:{arguments:[{type:{name:"ITreeNode",elements:[{name:"union",raw:"AsyncApiTreeNodeValue<K> | null",elements:[{name:"unknown"},{name:"null"}]},{name:"AsyncApiTreeNodeKinds.BINDING"},{name:"Partial",elements:[{name:"signature",type:"object",raw:`{
  readonly brokenRef?: string
  readonly _fragment: unknown
}`,signature:{properties:[{key:"brokenRef",value:{name:"string",required:!1}},{key:"_fragment",value:{name:"unknown",required:!0}}]}}],raw:`Partial<{
  readonly brokenRef?: string
  readonly _fragment: unknown
}>`}],raw:"ITreeNode<AsyncApiTreeNodeValue<K> | null, K, AsyncApiNodeMeta>"},name:"option"}],return:{name:"void"}}},description:""}}};const Un=()=>{console.warn("Expander callback is not provided.")},ce=n=>{const{expandable:e,expanded:t,onClick:r,level:s}=n,o=s>0;return!e&&!o?null:a.jsxs("div",{className:`flex flex-row items-center justify-center ${o?"gap-1":""}`,children:[o&&a.jsx(un,{short:e}),e&&t!==void 0&&a.jsx(pn,{onToggle:r??Un,expanded:t})]})};ce.__docgenInfo={description:"",methods:[],displayName:"Expander",props:{expandable:{required:!0,tsType:{name:"boolean"},description:""},expanded:{required:!1,tsType:{name:"boolean"},description:""},onClick:{required:!1,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:""},level:{required:!0,tsType:{name:"number"},description:""}}};const Fn={small:8,medium:16,large:24},ue=n=>{const{level:e,gapSize:t="medium"}=n,r=Fn[t];return e===0?null:a.jsx("div",{style:{display:"flex",gap:`${r}px`,height:"100%"},children:Array.from({length:e}).map((s,o)=>a.jsx("div",{style:{width:"1px",backgroundColor:"#9e9e9e",alignSelf:"stretch"}},o))})};ue.__docgenInfo={description:"",methods:[],displayName:"LevelIndicator",props:{level:{required:!0,tsType:{name:"number"},description:""},gapSize:{required:!1,tsType:{name:"union",raw:"'small' | 'medium' | 'large'",elements:[{name:"literal",value:"'small'"},{name:"literal",value:"'medium'"},{name:"literal",value:"'large'"}]},description:""}}};const O={h1:"h1",h2:"h2",h3:"h3",h4:"h4",body:"body"},h=y.memo(n=>{const e=g();return e===se?a.jsxs("div",{style:{fontSize:12,marginTop:4,marginBottom:4},children:["This layout mode (",e,") is not supported."]}):a.jsx(Wn,{...n})}),V=y.memo(n=>{const{expandable:e,expanded:t,onClickExpander:r,layoutSide:s,subheader:o}=n,i=C(),p=g()===k?"w-1/2":"w-full",c=i>0||e;return a.jsxs("div",{className:`flex flex-row items-center gap-2 ${p}`,children:[c&&a.jsxs("div",{className:"flex flex-row items-stretch h-full",children:[a.jsx(ue,{level:i}),a.jsx(ce,{expandable:e,expanded:t,onClick:r,level:i})]}),a.jsx(Xn,{...n}),o==null?void 0:o(s)]})}),$n={[O.h1]:"text-xl font-bold",[O.h2]:"text-lg font-bold",[O.h3]:"text-base font-bold",[O.h4]:"text-xs font-bold",[O.body]:"text-xs"},Xn=y.memo(n=>{const{value:e,diff:t,variant:r,expandable:s,onClickExpander:o}=n,i=y.useMemo(()=>zn(e),[t,e]),d=y.useMemo(()=>["font-Inter-Medium",$n[r],s?"hover:cursor-pointer":""].join(" "),[s,r]);return a.jsx("div",{className:d,onClick:o,children:i})});function zn(n,e){return n}const Wn=y.memo(n=>g()===k?a.jsxs("div",{className:"flex flex-row",children:[a.jsx(V,{...n,layoutSide:mn}),a.jsx(V,{...n,layoutSide:U})]}):a.jsx("div",{className:"flex flex-row",children:a.jsx(V,{...n,layoutSide:U})}));h.__docgenInfo={description:"",methods:[],displayName:"TitleRow",props:{value:{required:!1,tsType:{name:"string"},description:""},diff:{required:!1,tsType:{name:"Diff"},description:""},expandable:{required:!0,tsType:{name:"boolean"},description:""},expanded:{required:!1,tsType:{name:"boolean"},description:""},onClickExpander:{required:!1,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:""},variant:{required:!0,tsType:{name:"TitleVariant"},description:""},subheader:{required:!1,tsType:{name:"signature",type:"function",raw:"(layoutSide: LayoutSide) => ReactElement",signature:{arguments:[{type:{name:"union",raw:`| typeof ORIGIN_LAYOUT_SIDE
| typeof CHANGED_LAYOUT_SIDE`,elements:[{name:"ORIGIN_LAYOUT_SIDE"},{name:"CHANGED_LAYOUT_SIDE"}]},name:"layoutSide"}],return:{name:"ReactElement"}}},description:""}}};const M=n=>{const{node:e,expandable:t,expanded:r,titleVariant:s=O.h3}=n,o=yn(),i=C(),[d,u]=y.useState(r??!1),p=y.useCallback(()=>{u(A=>!A)},[]),c=e.value();if((c==null?void 0:c.valueType)===E.JSON_SCHEMA){const A=c.value;return a.jsx(F,{schema:A,expandedDepth:2,displayMode:o,customizationOptions:{headerRowTitle:H(e.key)}})}if((c==null?void 0:c.valueType)===E.MULTI_SCHEMA){const A=Nn(c.value)&&"schema"in c.value?c.value.schema:void 0;return a.jsx(F,{schema:A,expandedDepth:2,displayMode:o,customizationOptions:{headerRowTitle:H(e.key)}})}const N=e.childrenNodes();return a.jsxs("div",{className:"flex flex-col gap-3",children:[a.jsx(h,{value:H(e.key),expandable:t,expanded:d,onClickExpander:p,variant:s,subheader:A=>{switch(c==null?void 0:c.valueType){case"string":case"number":case"boolean":return a.jsx("span",{className:"text-slate-500 text-xs",children:`${c==null?void 0:c.value}`})}return a.jsx(a.Fragment,{})}}),d&&N.map(A=>{if(!ie(A))return null;const m=A.value(),S=i+1;return a.jsx(J.Provider,{value:S,children:a.jsx(M,{node:A,expandable:(m==null?void 0:m.isPrimitive)??!1,expanded:d,titleVariant:s},A.id)})})]})};function H(n){return n.toString().charAt(0).toUpperCase()+n.toString().slice(1)}M.__docgenInfo={description:"",methods:[],displayName:"JsoPropertyNodeViewer",props:{node:{required:!0,tsType:{name:"ITreeNode",elements:[{name:"union",raw:"AsyncApiTreeNodeValue<K> | null",elements:[{name:"unknown"},{name:"null"}]},{name:"AsyncApiTreeNodeKinds.JSO_PROPERTY"},{name:"Partial",elements:[{name:"signature",type:"object",raw:`{
  readonly brokenRef?: string
  readonly _fragment: unknown
}`,signature:{properties:[{key:"brokenRef",value:{name:"string",required:!1}},{key:"_fragment",value:{name:"unknown",required:!0}}]}}],raw:`Partial<{
  readonly brokenRef?: string
  readonly _fragment: unknown
}>`}],raw:"ITreeNode<AsyncApiTreeNodeValue<K> | null, K, AsyncApiNodeMeta>"},description:""},expandable:{required:!0,tsType:{name:"boolean"},description:""},expanded:{required:!1,tsType:{name:"boolean"},description:""},titleVariant:{required:!1,tsType:{name:"TitleVariant"},description:""}}};const x="Bindings",z=new Map([[l.OPERATION,`Operation ${x}`],[l.CHANNEL,`Channel ${x}`],[l.MESSAGE,`Message ${x}`],[null,x]]),q=n=>{const{node:e,relatedTo:t}=n,r=C(),[s,o]=y.useState(!0),i=y.useCallback(()=>{o(m=>!m)},[]),[d,u]=y.useState(null),p=e.nestedNodes(),c=y.useMemo(()=>p.filter(Bn),[p]),N=e.childrenNodes(d==null?void 0:d.id);y.useEffect(()=>{c.length>0&&d===null&&u(c[0])},[c,d]);const A=y.useCallback(m=>a.jsx(le,{options:c,selectedOption:d,onSelectOption:u}),[c,d]);return a.jsxs("div",{className:"flex flex-col gap-1",children:[a.jsx(h,{value:z.get(t)??z.get(null),expandable:!0,expanded:s,onClickExpander:i,variant:"h3",subheader:A}),s&&N.map(m=>{if(!ie(m))return null;const S=m.value(),P=r+1;return a.jsx(J.Provider,{value:P,children:a.jsx(M,{node:m,expandable:(S==null?void 0:S.isPrimitive)??!1,expanded:!0,titleVariant:O.h4},m.id)})})]})};q.__docgenInfo={description:"",methods:[],displayName:"BindingsNodeViewer",props:{node:{required:!0,tsType:{name:"ITreeNode",elements:[{name:"union",raw:"AsyncApiTreeNodeValue<K> | null",elements:[{name:"unknown"},{name:"null"}]},{name:"AsyncApiTreeNodeKinds.BINDINGS"},{name:"Partial",elements:[{name:"signature",type:"object",raw:`{
  readonly brokenRef?: string
  readonly _fragment: unknown
}`,signature:{properties:[{key:"brokenRef",value:{name:"string",required:!1}},{key:"_fragment",value:{name:"unknown",required:!0}}]}}],raw:`Partial<{
  readonly brokenRef?: string
  readonly _fragment: unknown
}>`}],raw:"ITreeNode<AsyncApiTreeNodeValue<K> | null, K, AsyncApiNodeMeta>"},description:""},relatedTo:{required:!0,tsType:{name:"AsyncApiTreeNodeKinds[union]",raw:"typeof AsyncApiTreeNodeKinds[keyof typeof AsyncApiTreeNodeKinds]"},description:""}}};const pe=n=>{const{node:e}=n,t=C(),r=g(),s=e.value(),o=y.useMemo(()=>`Channel ${(s==null?void 0:s.title)??e.key.toString()??""}`.trim(),[s,e]);return a.jsxs("div",{className:"flex flex-col gap-1",children:[a.jsx(h,{value:o,expandable:!1,expanded:!0,variant:"h2"}),a.jsx(B,{value:(s==null?void 0:s.description)??"",layoutMode:r,level:t})]})};pe.__docgenInfo={description:"",methods:[],displayName:"ChannelNodeViewer",props:{node:{required:!0,tsType:{name:"ITreeNode",elements:[{name:"union",raw:"AsyncApiTreeNodeValue<K> | null",elements:[{name:"unknown"},{name:"null"}]},{name:"AsyncApiTreeNodeKinds.CHANNEL"},{name:"Partial",elements:[{name:"signature",type:"object",raw:`{
  readonly brokenRef?: string
  readonly _fragment: unknown
}`,signature:{properties:[{key:"brokenRef",value:{name:"string",required:!1}},{key:"_fragment",value:{name:"unknown",required:!0}}]}}],raw:`Partial<{
  readonly brokenRef?: string
  readonly _fragment: unknown
}>`}],raw:"ITreeNode<AsyncApiTreeNodeValue<K> | null, K, AsyncApiNodeMeta>"},description:""}}};const me=n=>{const{node:e}=n,t=e.value(),r=(t==null?void 0:t.description)??"",s=e.childrenNodes(),o=s.find(ae),i=s.find(Kn),d=s.find(Jn);return a.jsxs("div",{className:"flex flex-col gap-3",children:[r&&a.jsx(B,{value:r,level:1}),o&&a.jsx(q,{node:o,relatedTo:l.MESSAGE}),i&&a.jsx(M,{node:i,expandable:!0}),d&&a.jsx(M,{node:d,expandable:!0})]})};me.__docgenInfo={description:"",methods:[],displayName:"MessageNodeViewer",props:{node:{required:!0,tsType:{name:"ITreeNode",elements:[{name:"union",raw:"AsyncApiTreeNodeValue<K> | null",elements:[{name:"unknown"},{name:"null"}]},{name:"AsyncApiTreeNodeKinds.MESSAGE"},{name:"Partial",elements:[{name:"signature",type:"object",raw:`{
  readonly brokenRef?: string
  readonly _fragment: unknown
}`,signature:{properties:[{key:"brokenRef",value:{name:"string",required:!1}},{key:"_fragment",value:{name:"unknown",required:!0}}]}}],raw:`Partial<{
  readonly brokenRef?: string
  readonly _fragment: unknown
}>`}],raw:"ITreeNode<AsyncApiTreeNodeValue<K> | null, K, AsyncApiNodeMeta>"},description:""}}};const ye=n=>{const{options:e,selectedOption:t,onSelectOption:r}=n;return e.length===0?null:a.jsx("div",{children:e.map(s=>{const o=s.value();return o?a.jsx("button",{className:`button-selector-option ${t===s?"selected":""}`,onClick:i=>{i.preventDefault(),i.stopPropagation(),r(s)},children:o.title??o.internalTitle??"unknown"},s.id):null})})};ye.__docgenInfo={description:"",methods:[],displayName:"MessageSelector",props:{options:{required:!0,tsType:{name:"Array",elements:[{name:"ITreeNode",elements:[{name:"union",raw:"AsyncApiTreeNodeValue<K> | null",elements:[{name:"unknown"},{name:"null"}]},{name:"AsyncApiTreeNodeKinds.MESSAGE"},{name:"Partial",elements:[{name:"signature",type:"object",raw:`{
  readonly brokenRef?: string
  readonly _fragment: unknown
}`,signature:{properties:[{key:"brokenRef",value:{name:"string",required:!1}},{key:"_fragment",value:{name:"unknown",required:!0}}]}}],raw:`Partial<{
  readonly brokenRef?: string
  readonly _fragment: unknown
}>`}],raw:"ITreeNode<AsyncApiTreeNodeValue<K> | null, K, AsyncApiNodeMeta>"}],raw:"AsyncApiTreeNode<typeof AsyncApiTreeNodeKinds.MESSAGE>[]"},description:""},selectedOption:{required:!0,tsType:{name:"union",raw:"AsyncApiTreeNode<typeof AsyncApiTreeNodeKinds.MESSAGE> | null",elements:[{name:"ITreeNode",elements:[{name:"union",raw:"AsyncApiTreeNodeValue<K> | null",elements:[{name:"unknown"},{name:"null"}]},{name:"AsyncApiTreeNodeKinds.MESSAGE"},{name:"Partial",elements:[{name:"signature",type:"object",raw:`{
  readonly brokenRef?: string
  readonly _fragment: unknown
}`,signature:{properties:[{key:"brokenRef",value:{name:"string",required:!1}},{key:"_fragment",value:{name:"unknown",required:!0}}]}}],raw:`Partial<{
  readonly brokenRef?: string
  readonly _fragment: unknown
}>`}],raw:"ITreeNode<AsyncApiTreeNodeValue<K> | null, K, AsyncApiNodeMeta>"},{name:"null"}]},description:""},onSelectOption:{required:!0,tsType:{name:"signature",type:"function",raw:"(option: AsyncApiTreeNode<typeof AsyncApiTreeNodeKinds.MESSAGE>) => void",signature:{arguments:[{type:{name:"ITreeNode",elements:[{name:"union",raw:"AsyncApiTreeNodeValue<K> | null",elements:[{name:"unknown"},{name:"null"}]},{name:"AsyncApiTreeNodeKinds.MESSAGE"},{name:"Partial",elements:[{name:"signature",type:"object",raw:`{
  readonly brokenRef?: string
  readonly _fragment: unknown
}`,signature:{properties:[{key:"brokenRef",value:{name:"string",required:!1}},{key:"_fragment",value:{name:"unknown",required:!0}}]}}],raw:`Partial<{
  readonly brokenRef?: string
  readonly _fragment: unknown
}>`}],raw:"ITreeNode<AsyncApiTreeNodeValue<K> | null, K, AsyncApiNodeMeta>"},name:"option"}],return:{name:"void"}}},description:""}}};const Ne=n=>{const{node:e}=n,[t,r]=y.useState(null),o=e.nestedNodes().filter(Hn);y.useEffect(()=>{o.length>0&&t===null&&r(o[0])},[o,t]);const i=y.useCallback(d=>a.jsx(ye,{options:o,selectedOption:t,onSelectOption:r}),[o,t]);return a.jsxs("div",{children:[a.jsx(h,{value:"Messages",expandable:!1,expanded:!0,variant:"h2",subheader:i}),t&&a.jsx(me,{node:t})]})};Ne.__docgenInfo={description:"",methods:[],displayName:"MessagesNodeViewer",props:{node:{required:!0,tsType:{name:"ITreeNode",elements:[{name:"union",raw:"AsyncApiTreeNodeValue<K> | null",elements:[{name:"unknown"},{name:"null"}]},{name:"AsyncApiTreeNodeKinds.MESSAGES"},{name:"Partial",elements:[{name:"signature",type:"object",raw:`{
  readonly brokenRef?: string
  readonly _fragment: unknown
}`,signature:{properties:[{key:"brokenRef",value:{name:"string",required:!1}},{key:"_fragment",value:{name:"unknown",required:!0}}]}}],raw:`Partial<{
  readonly brokenRef?: string
  readonly _fragment: unknown
}>`}],raw:"ITreeNode<AsyncApiTreeNodeValue<K> | null, K, AsyncApiNodeMeta>"},description:""}}};const Ae=n=>{const{node:e}=n,t=g(),r=e.value(),s=y.useMemo(()=>jn(l.OPERATION,e.childrenNodes()),[e]);return a.jsxs("div",{className:"flex flex-col gap-1",children:[a.jsx(h,{value:(r==null?void 0:r.title)??e.key.toString()??"No title",expandable:!1,variant:"h1"}),a.jsx(de,{action:(r==null?void 0:r.action)??"",address:(r==null?void 0:r.address)??""}),a.jsx(B,{value:(r==null?void 0:r.description)??"",layoutMode:t}),a.jsx(Qn,{children:s})]})},Qn=n=>{const{children:e}=n;return a.jsx("div",{className:"flex flex-col gap-1",children:e.map(t=>ae(t)?a.jsx(q,{node:t,relatedTo:l.OPERATION},t.key):Yn(t)?a.jsx(pe,{node:t},t.key):Vn(t)?a.jsx(Ne,{node:t},t.key):null)})};Ae.__docgenInfo={description:"",methods:[],displayName:"OperationNodeViewer",props:{node:{required:!0,tsType:{name:"ITreeNode",elements:[{name:"union",raw:"AsyncApiTreeNodeValue<K> | null",elements:[{name:"unknown"},{name:"null"}]},{name:"AsyncApiTreeNodeKinds.OPERATION"},{name:"Partial",elements:[{name:"signature",type:"object",raw:`{
  readonly brokenRef?: string
  readonly _fragment: unknown
}`,signature:{properties:[{key:"brokenRef",value:{name:"string",required:!1}},{key:"_fragment",value:{name:"unknown",required:!0}}]}}],raw:`Partial<{
  readonly brokenRef?: string
  readonly _fragment: unknown
}>`}],raw:"ITreeNode<AsyncApiTreeNodeValue<K> | null, K, AsyncApiNodeMeta>"},description:""}}};const fe=y.memo(n=>a.jsx(An,{fallback:a.jsx(fn,{componentName:"Async API Operation Viewer"}),children:a.jsx(Zn,{...n})})),Zn=y.memo(n=>{const{source:e,operationType:t,operationName:r,displayMode:s=Sn}=n,i=new K(e).build();console.debug("[AsyncAPI] Source:",e),console.debug("[AsyncAPI] Tree:",i);const d=i.root;if(!d)return null;const p=d.childrenNodes().find(c=>{if(!Dn(c))return!1;const N=c.value();return c.key===r&&(N==null?void 0:N.action)===t});return p?a.jsx(_n.Provider,{value:s,children:a.jsxs(En.Provider,{value:Tn,children:[" ",a.jsx(J.Provider,{value:0,children:a.jsx(Ae,{node:p})})]})}):null});fe.__docgenInfo={description:"",methods:[],displayName:"AsyncApiOperationViewer",props:{source:{required:!0,tsType:{name:"unknown"},description:""},operationType:{required:!1,tsType:{name:"string"},description:""},operationName:{required:!1,tsType:{name:"string"},description:""},displayMode:{required:!1,tsType:{name:"union",raw:`| typeof SIMPLE_DISPLAY_MODE
| typeof DETAILED_DISPLAY_MODE`,elements:[{name:"SIMPLE_DISPLAY_MODE"},{name:"DETAILED_DISPLAY_MODE"}]},description:""}}};const lt={title:"Async Api Viewer",component:fe,parameters:{},argTypes:{source:{control:"object"}},args:{source:{}}},w={args:{source:{}}},et={asyncapi:"3.0.0",info:{title:"example-event-service",version:"1.0.0","x-generator":"springwolf"},defaultContentType:"application/json",servers:{"kafka-main":{host:"kafka-host",protocol:"kafka"}},channels:{"customer-change-topic":{address:"customer-change-topic",description:"Channel for customer change notifications",messages:{BaseEventMessage:{$ref:"#/components/messages/BaseEventMessage"}},servers:[{$ref:"#/servers/kafka-main"}],bindings:{}}},components:{schemas:{HeadersExample:{title:"HeadersExample",type:"object",properties:{"X-Idempotency-Key":{type:"string"}},examples:[{"X-Idempotency-Key":"string"}]},BaseEvent:{title:"BaseEvent",type:"object",properties:{currentInstance:{type:"object",description:"New data state"},currentModelVersion:{type:"integer",description:"Model Version",format:"int32"},previousInstance:{type:"object",description:"Previous data state"},resourceAction:{type:"string",description:"Resource Action"},resourceType:{type:"string",description:"Resource Type"}},description:"Base event to describe Customer's data changes",examples:[{currentInstance:{},currentModelVersion:0,previousInstance:{},resourceAction:"string",resourceType:"string"}],required:["currentInstance","currentModelVersion","previousInstance","resourceAction","resourceType"]}},messages:{BaseEventMessage:{headers:{$ref:"#/components/schemas/HeadersExample"},payload:{$ref:"#/components/schemas/BaseEvent"},description:"Base event to describe Customer's data changes",name:"BaseEventMessage",title:"BaseEvent",bindings:{kafka:{bindingVersion:"0.5.0"}}}}},operations:{"customer-change-topic_send_BaseEvent":{action:"send",channel:{$ref:"#/channels/customer-change-topic"},title:"Customer change topic send",description:"Send events about Customer's data changes",bindings:{kafka:{bindingVersion:"0.5.0"}},messages:[{$ref:"#/channels/customer-change-topic/messages/BaseEventMessage"}]}}},b={args:{source:gn({source:et}),operationName:"customer-change-topic_send_BaseEvent",operationType:"send"}};var W,Q,Z;w.parameters={...w.parameters,docs:{...(W=w.parameters)==null?void 0:W.docs,source:{originalSource:`{
  args: {
    source: {}
  }
}`,...(Z=(Q=w.parameters)==null?void 0:Q.docs)==null?void 0:Z.source}}};var ee,ne,te;b.parameters={...b.parameters,docs:{...(ee=b.parameters)==null?void 0:ee.docs,source:{originalSource:`{
  args: {
    source: prepareAsyncApiDocument({
      source: KAFKA_E2E_SOURCE
    }),
    operationName: 'customer-change-topic_send_BaseEvent',
    operationType: 'send'
  }
}`,...(te=(ne=b.parameters)==null?void 0:ne.docs)==null?void 0:te.source}}};const ct=["Test","KafkaE2E"];export{b as KafkaE2E,w as Test,ct as __namedExportsOrder,lt as default};
