import{j as i}from"./jsx-runtime-beaa2906.js";import{R as g,T as S,N as k,V as m,Q as A,i as y,W as v,x as L,y as T,G as f,X as w,Y as G,Z as N,_ as P,$ as x,a0 as M,a1 as _,a2 as C,o as b,E as j,c as O,e as I,f as V,g as R,h as Y,m as q,j as Q,k as U}from"./ErrorBoundaryFallback-2b0ebb5d.js";import{r as E}from"./index-f46741a2.js";import{g as H,f as $,h as B,u as K,G as F,i as J,a as h,C as X,d as W,e as Z}from"./buildASTSchema-c2ce1462.js";function z(p){return({value:r,state:e,rules:o,path:l,key:d})=>{if(typeof d=="symbol")return{done:!0};if(r==null)return{done:!0};if(!o)return g(l)?{done:!0}:{value:r,state:e};if(!("kind"in o)||!S.includes(o.kind))return g(l)?{done:!0}:{value:r,state:e};const u="#"+k(l),{parent:s,container:a}=e,{kind:c}=o;let n={value:r,node:{}};switch(c){case m.query:case m.mutation:case m.subscription:{n=p.createGraphSchemaNode({id:u,kind:c,key:d,value:r,parent:s,container:a,newDataLevel:!1,isCycle:!1});break}case m.schema:{const{description:t}=r,D={value:{description:t},parent:s,container:a,meta:{...A(r)?{brokenRef:r.$ref}:{},_fragment:r},newDataLevel:!1};n.node=p.createNode(u,c,d,!1,D);break}}if(s==null||s.addChild(n.node),n.value){const t=new Map(e.alreadyConvertedMappingStack);y(r)&&"typeDef"in r?t.set(r.typeDef,n.node):t.set(r,n.node);const D=n.node.type===v.simple?{parent:n.node,alreadyConvertedMappingStack:t}:{parent:s,container:n.node,alreadyConvertedMappingStack:t};return{value:n.value,state:D}}else return{done:!0}}}class ee extends L{createNodeMeta(r){const{value:e}=r;return T(e)==="simple"?{...f(e,_),...w(e),_fragment:e}:{_fragment:e}}createNodeValue(r){var d,u,s,a,c;const{value:e}=r;if(e==null)return null;if(!y(e))return e;if(G(e)){const n=["title","description"];return{...f(e.definition,n),...e.meta?{meta:e.meta}:{}}}let o;if(N(e)?o=e:y(e.typeDef)&&(N(e.typeDef)||P(e.typeDef))&&(o=e.typeDef),o){const n=o!==e;let t;return((d=r.parent)==null?void 0:d.kind)===x.args&&((s=(u=r.parent)==null?void 0:u.parent)==null?void 0:s.kind)===x.directiveUsage&&(t=(c=(a=r.parent.parent.value())==null?void 0:a.meta)==null?void 0:c[r.key]),{...n?f(e,C):{},...f(o,C),type:o.type.kind,...M(e.typeDef),...t!==void 0?{value:t}:{}}}return f(e,["title","description","directives"])}createGraphSchemaNode(r){return this.createJsonSchemaNode(r)}}const re=p=>{const r=new ee(p);if(!y(p))return r;const e={parent:null,alreadyConvertedMappingStack:new Map};return b(p,[$(r),z(r),B(r)],{state:e,rules:H}),r},te=p=>i.jsx(j,{fallback:i.jsx(O,{componentName:"GraphQL Operation Viewer"}),children:i.jsx(ne,{...p})}),ne=p=>{K();const{source:r,operationPath:e,expandedDepth:o=Q,displayMode:l=U}=p,d=E.useMemo(()=>re(r),[r]),s=E.useMemo(()=>new F(d,e,o),[o,e,d]).root;return s?i.jsx(I.Provider,{value:l,children:i.jsx(V.Provider,{value:0,children:i.jsx("div",{style:{marginLeft:0},children:s.children.map((a,c)=>{const n=`root-children-${c}`;if(J(a)){const t=a.meta;return R(a.node)?e||a.first?i.jsx(h,{state:a,$nodeChange:t==null?void 0:t.$nodeChange},n):null:Y(a.node)&&a.first?i.jsxs("div",{children:[i.jsx(X,{layoutMode:q}),i.jsx(h,{state:a,$nodeChange:t==null?void 0:t.$nodeChange})]},n):i.jsx(h,{state:a,$nodeChange:t==null?void 0:t.$nodeChange},n)}return W(a)?i.jsx(Z,{state:a,onGlobalSelectNestedNode:()=>null},n):null})})})}):null};te.__docgenInfo={description:"",methods:[],displayName:"GraphQLOperationViewer",props:{source:{required:!0,tsType:{name:"unknown"},description:""},operationPath:{required:!1,tsType:{name:"string"},description:""},expandedDepth:{required:!1,tsType:{name:"number"},description:""},displayMode:{required:!1,tsType:{name:"union",raw:`| typeof SIMPLE_DISPLAY_MODE
| typeof DETAILED_DISPLAY_MODE`,elements:[{name:"SIMPLE_DISPLAY_MODE"},{name:"DETAILED_DISPLAY_MODE"}]},description:""}}};export{te as G};
